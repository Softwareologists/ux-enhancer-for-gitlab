import{e as lt,r as L,m as at,i as Ot,w as Z,a as ot,b as ge,c as rt,t as kt,h as Lt,g as it,o as ut,n as ye,d as ce,f as C,j as Ct,k as He,l as Dt,u as R,p as le,q as ct,s as te,v as ae,x as D,F as ie,y as _e,z as P,A as E,B as M,C as $,D as N,_ as U,E as xt,G as $e,H as J,T as Me,I as dt,J as K,K as we,L as Ie,M as q,N as Rt,O as Vt,P as Nt,Q as qe,R as Be,S as We,U as Pt,V as Ut,W as Ze,X as jt,Y as Ht,Z as $t,$ as Gt,a0 as ft,a1 as Ye,a2 as Ft,a3 as qt,a4 as Bt,a5 as Wt}from"./SvgLogo.js";var Zt=!1;/*!
 * pinia v2.1.7
 * (c) 2023 Eduardo San Martin Morote
 * @license MIT
 */let gt;const Oe=e=>gt=e,mt=Symbol();function Re(e){return e&&typeof e=="object"&&Object.prototype.toString.call(e)==="[object Object]"&&typeof e.toJSON!="function"}var be;(function(e){e.direct="direct",e.patchObject="patch object",e.patchFunction="patch function"})(be||(be={}));function Yt(){const e=lt(!0),t=e.run(()=>L({}));let s=[],n=[];const l=at({install(a){Oe(l),l._a=a,a.provide(mt,l),a.config.globalProperties.$pinia=l,n.forEach(o=>s.push(o)),n=[]},use(a){return!this._a&&!Zt?n.push(a):s.push(a),this},_p:s,_a:null,_e:e,_s:new Map,state:t});return l}const ht=()=>{};function Je(e,t,s,n=ht){e.push(t);const l=()=>{const a=e.indexOf(t);a>-1&&(e.splice(a,1),n())};return!s&&it()&&ut(l),l}function de(e,...t){e.slice().forEach(s=>{s(...t)})}const Jt=e=>e();function Ve(e,t){e instanceof Map&&t instanceof Map&&t.forEach((s,n)=>e.set(n,s)),e instanceof Set&&t instanceof Set&&t.forEach(e.add,e);for(const s in t){if(!t.hasOwnProperty(s))continue;const n=t[s],l=e[s];Re(l)&&Re(n)&&e.hasOwnProperty(s)&&!ge(n)&&!rt(n)?e[s]=Ve(l,n):e[s]=n}return e}const zt=Symbol();function Kt(e){return!Re(e)||!e.hasOwnProperty(zt)}const{assign:ee}=Object;function Xt(e){return!!(ge(e)&&e.effect)}function Qt(e,t,s,n){const{state:l,actions:a,getters:o}=t,r=s.state.value[e];let f;function g(){r||(s.state.value[e]=l?l():{});const u=ce(s.state.value[e]);return ee(u,a,Object.keys(o||{}).reduce((i,c)=>(i[c]=at(C(()=>{Oe(s);const m=s._s.get(e);return o[c].call(m,m)})),i),{}))}return f=pt(e,g,t,s,n,!0),f}function pt(e,t,s={},n,l,a){let o;const r=ee({actions:{}},s),f={deep:!0};let g,u,i=[],c=[],m;const y=n.state.value[e];!a&&!y&&(n.state.value[e]={}),L({});let k;function S(p){let d;g=u=!1,typeof p=="function"?(p(n.state.value[e]),d={type:be.patchFunction,storeId:e,events:m}):(Ve(n.state.value[e],p),d={type:be.patchObject,payload:p,storeId:e,events:m});const I=k=Symbol();ye().then(()=>{k===I&&(g=!0)}),u=!0,de(i,d,n.state.value[e])}const b=a?function(){const{state:d}=s,I=d?d():{};this.$patch(V=>{ee(V,I)})}:ht;function A(){o.stop(),i=[],c=[],n._s.delete(e)}function w(p,d){return function(){Oe(n);const I=Array.from(arguments),V=[],H=[];function G(x){V.push(x)}function me(x){H.push(x)}de(c,{args:I,name:p,store:h,after:G,onError:me});let F;try{F=d.apply(this&&this.$id===e?this:h,I)}catch(x){throw de(H,x),x}return F instanceof Promise?F.then(x=>(de(V,x),x)).catch(x=>(de(H,x),Promise.reject(x))):(de(V,F),F)}}const v={_p:n,$id:e,$onAction:Je.bind(null,c),$patch:S,$reset:b,$subscribe(p,d={}){const I=Je(i,p,d.detached,()=>V()),V=o.run(()=>Z(()=>n.state.value[e],H=>{(d.flush==="sync"?u:g)&&p({storeId:e,type:be.direct,events:m},H)},ee({},f,d)));return I},$dispose:A},h=ot(v);n._s.set(e,h);const O=(n._a&&n._a.runWithContext||Jt)(()=>n._e.run(()=>(o=lt()).run(t)));for(const p in O){const d=O[p];if(ge(d)&&!Xt(d)||rt(d))a||(y&&Kt(d)&&(ge(d)?d.value=y[p]:Ve(d,y[p])),n.state.value[e][p]=d);else if(typeof d=="function"){const I=w(p,d);O[p]=I,r.actions[p]=d}}return ee(h,O),ee(kt(h),O),Object.defineProperty(h,"$state",{get:()=>n.state.value[e],set:p=>{S(d=>{ee(d,p)})}}),n._p.forEach(p=>{ee(h,o.run(()=>p({store:h,app:n._a,pinia:n,options:r})))}),y&&a&&s.hydrate&&s.hydrate(h.$state,y),g=!0,u=!0,h}function en(e,t,s){let n,l;const a=typeof t=="function";typeof e=="string"?(n=e,l=a?s:t):(l=e,n=e.id);function o(r,f){const g=Lt();return r=r||(g?Ot(mt,null):null),r&&Oe(r),r=gt,r._s.has(n)||(a?pt(n,t,l,r):Qt(n,l,r)),r._s.get(n)}return o.$id=n,o}function ke(e){return it()?(ut(e),!0):!1}function Le(){const e=new Set,t=l=>{e.delete(l)};return{on:l=>{e.add(l);const a=()=>t(l);return ke(a),{off:a}},off:t,trigger:(...l)=>Promise.all(Array.from(e).map(a=>a(...l)))}}function B(e){return typeof e=="function"?e():R(e)}const Ge=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const tn=Object.prototype.toString,nn=e=>tn.call(e)==="[object Object]",Te=()=>{},sn=ln();function ln(){var e,t;return Ge&&((e=window?.navigator)==null?void 0:e.userAgent)&&(/iP(ad|hone|od)/.test(window.navigator.userAgent)||((t=window?.navigator)==null?void 0:t.maxTouchPoints)>2&&/iPad|Macintosh/.test(window?.navigator.userAgent))}function an(e,t){function s(...n){return new Promise((l,a)=>{Promise.resolve(e(()=>t.apply(this,n),{fn:t,thisArg:this,args:n})).then(l).catch(a)})}return s}const vt=e=>e();function on(e=vt){const t=L(!0);function s(){t.value=!1}function n(){t.value=!0}const l=(...a)=>{t.value&&e(...a)};return{isActive:He(t),pause:s,resume:n,eventFilter:l}}function ze(e,t=!1,s="Timeout"){return new Promise((n,l)=>{setTimeout(t?()=>l(s):n,e)})}function rn(e,...t){return t.some(s=>s in e)}function un(e){return Object.entries(e)}function cn(e){return e||ct()}function Ce(...e){if(e.length!==1)return Ct(...e);const t=e[0];return typeof t=="function"?He(Dt(()=>({get:t,set:Te}))):L(t)}function dn(e,t,s={}){const{eventFilter:n=vt,...l}=s;return Z(e,an(n,t),l)}function fn(e,t,s={}){const{eventFilter:n,...l}=s,{eventFilter:a,pause:o,resume:r,isActive:f}=on(n);return{stop:dn(e,t,{...l,eventFilter:a}),pause:o,resume:r,isActive:f}}function gn(e,t=!0,s){const n=cn(s);n?le(e,n):t?e():ye(e)}function Ne(e,t=!1){function s(i,{flush:c="sync",deep:m=!1,timeout:y,throwOnTimeout:k}={}){let S=null;const A=[new Promise(w=>{S=Z(e,v=>{i(v)!==t&&(S?.(),w(v))},{flush:c,deep:m,immediate:!0})})];return y!=null&&A.push(ze(y,k).then(()=>B(e)).finally(()=>S?.())),Promise.race(A)}function n(i,c){if(!ge(i))return s(v=>v===i,c);const{flush:m="sync",deep:y=!1,timeout:k,throwOnTimeout:S}=c??{};let b=null;const w=[new Promise(v=>{b=Z([e,i],([h,_])=>{t!==(h===_)&&(b?.(),v(h))},{flush:m,deep:y,immediate:!0})})];return k!=null&&w.push(ze(k,S).then(()=>B(e)).finally(()=>(b?.(),B(e)))),Promise.race(w)}function l(i){return s(c=>!!c,i)}function a(i){return n(null,i)}function o(i){return n(void 0,i)}function r(i){return s(Number.isNaN,i)}function f(i,c){return s(m=>{const y=Array.from(m);return y.includes(i)||y.includes(B(i))},c)}function g(i){return u(1,i)}function u(i=1,c){let m=-1;return s(()=>(m+=1,m>=i),c)}return Array.isArray(B(e))?{toMatch:s,toContains:f,changed:g,changedTimes:u,get not(){return Ne(e,!t)}}:{toMatch:s,toBe:n,toBeTruthy:l,toBeNull:a,toBeNaN:r,toBeUndefined:o,changed:g,changedTimes:u,get not(){return Ne(e,!t)}}}function mn(e){return Ne(e)}function hn(e,t,s={}){const{immediate:n=!0}=s,l=L(!1);let a=null;function o(){a&&(clearTimeout(a),a=null)}function r(){l.value=!1,o()}function f(...g){o(),l.value=!0,a=setTimeout(()=>{l.value=!1,a=null,e(...g)},B(t))}return n&&(l.value=!0,Ge&&f()),ke(r),{isPending:He(l),start:f,stop:r}}function fe(e){var t;const s=B(e);return(t=s?.$el)!=null?t:s}const ne=Ge?window:void 0;function ue(...e){let t,s,n,l;if(typeof e[0]=="string"||Array.isArray(e[0])?([s,n,l]=e,t=ne):[t,s,n,l]=e,!t)return Te;Array.isArray(s)||(s=[s]),Array.isArray(n)||(n=[n]);const a=[],o=()=>{a.forEach(u=>u()),a.length=0},r=(u,i,c,m)=>(u.addEventListener(i,c,m),()=>u.removeEventListener(i,c,m)),f=Z(()=>[fe(t),B(l)],([u,i])=>{if(o(),!u)return;const c=nn(i)?{...i}:i;a.push(...s.flatMap(m=>n.map(y=>r(u,m,y,c))))},{immediate:!0,flush:"post"}),g=()=>{f(),o()};return ke(g),g}let Ke=!1;function pn(e,t,s={}){const{window:n=ne,ignore:l=[],capture:a=!0,detectIframe:o=!1}=s;if(!n)return;sn&&!Ke&&(Ke=!0,Array.from(n.document.body.children).forEach(c=>c.addEventListener("click",Te)),n.document.documentElement.addEventListener("click",Te));let r=!0;const f=c=>l.some(m=>{if(typeof m=="string")return Array.from(n.document.querySelectorAll(m)).some(y=>y===c.target||c.composedPath().includes(y));{const y=fe(m);return y&&(c.target===y||c.composedPath().includes(y))}}),u=[ue(n,"click",c=>{const m=fe(e);if(!(!m||m===c.target||c.composedPath().includes(m))){if(c.detail===0&&(r=!f(c)),!r){r=!0;return}t(c)}},{passive:!0,capture:a}),ue(n,"pointerdown",c=>{const m=fe(e);r=!f(c)&&!!(m&&!c.composedPath().includes(m))},{passive:!0}),o&&ue(n,"blur",c=>{setTimeout(()=>{var m;const y=fe(e);((m=n.document.activeElement)==null?void 0:m.tagName)==="IFRAME"&&!y?.contains(n.document.activeElement)&&t(c)},0)})].filter(Boolean);return()=>u.forEach(c=>c())}function vn(){const e=L(!1);return ct()&&le(()=>{e.value=!0}),e}function bn(e){const t=vn();return C(()=>(t.value,!!e()))}const Xe=["hash","host","hostname","href","pathname","port","protocol","search"];function _n(e={}){const{window:t=ne}=e,s=Object.fromEntries(Xe.map(a=>[a,L()]));for(const[a,o]of un(s))Z(o,r=>{!t?.location||t.location[a]===r||(t.location[a]=r)});const n=a=>{var o;const{state:r,length:f}=t?.history||{},{origin:g}=t?.location||{};for(const u of Xe)s[u].value=(o=t?.location)==null?void 0:o[u];return ot({trigger:a,state:r,length:f,origin:g,...s})},l=L(n("load"));return t&&(ue(t,"popstate",()=>l.value=n("popstate"),{passive:!0}),ue(t,"hashchange",()=>l.value=n("hashchange"),{passive:!0})),l}const Ee=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Se="__vueuse_ssr_handlers__",yn=En();function En(){return Se in Ee||(Ee[Se]=Ee[Se]||{}),Ee[Se]}function Sn(e,t){return yn[e]||t}function wn(e){return e==null?"any":e instanceof Set?"set":e instanceof Map?"map":e instanceof Date?"date":typeof e=="boolean"?"boolean":typeof e=="string"?"string":typeof e=="object"?"object":Number.isNaN(e)?"any":"number"}const In={boolean:{read:e=>e==="true",write:e=>String(e)},object:{read:e=>JSON.parse(e),write:e=>JSON.stringify(e)},number:{read:e=>Number.parseFloat(e),write:e=>String(e)},any:{read:e=>e,write:e=>String(e)},string:{read:e=>e,write:e=>String(e)},map:{read:e=>new Map(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e.entries()))},set:{read:e=>new Set(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e))},date:{read:e=>new Date(e),write:e=>e.toISOString()}},Qe="vueuse-storage";function Tn(e,t,s,n={}){var l;const{flush:a="pre",deep:o=!0,listenToStorageChanges:r=!0,writeDefaults:f=!0,mergeDefaults:g=!1,shallow:u,window:i=ne,eventFilter:c,onError:m=d=>{console.error(d)},initOnMounted:y}=n,k=(u?te:L)(typeof t=="function"?t():t);if(!s)try{s=Sn("getDefaultStorage",()=>{var d;return(d=ne)==null?void 0:d.localStorage})()}catch(d){m(d)}if(!s)return k;const S=B(t),b=wn(S),A=(l=n.serializer)!=null?l:In[b],{pause:w,resume:v}=fn(k,()=>h(k.value),{flush:a,deep:o,eventFilter:c});return i&&r&&gn(()=>{ue(i,"storage",p),ue(i,Qe,O),y&&p()}),y||p(),k;function h(d){try{if(d==null)s.removeItem(e);else{const I=A.write(d),V=s.getItem(e);V!==I&&(s.setItem(e,I),i&&i.dispatchEvent(new CustomEvent(Qe,{detail:{key:e,oldValue:V,newValue:I,storageArea:s}})))}}catch(I){m(I)}}function _(d){const I=d?d.newValue:s.getItem(e);if(I==null)return f&&S!=null&&s.setItem(e,A.write(S)),S;if(!d&&g){const V=A.read(I);return typeof g=="function"?g(V,S):b==="object"&&!Array.isArray(V)?{...S,...V}:V}else return typeof I!="string"?I:A.read(I)}function O(d){p(d.detail)}function p(d){if(!(d&&d.storageArea!==s)){if(d&&d.key==null){k.value=S;return}if(!(d&&d.key!==e)){w();try{d?.newValue!==A.write(k.value)&&(k.value=_(d))}catch(I){m(I)}finally{d?ye(v):v()}}}}}function An(e,t,s={}){const{window:n=ne,...l}=s;let a;const o=bn(()=>n&&"MutationObserver"in n),r=()=>{a&&(a.disconnect(),a=void 0)},f=Z(()=>fe(e),i=>{r(),o.value&&n&&i&&(a=new MutationObserver(t),a.observe(i,l))},{immediate:!0}),g=()=>a?.takeRecords(),u=()=>{r(),f()};return ke(u),{isSupported:o,stop:u,takeRecords:g}}const Mn={json:"application/json",text:"text/plain"};function et(e){return e&&rn(e,"immediate","refetch","initialData","timeout","beforeFetch","afterFetch","onFetchError","fetch","updateDataOnError")}function De(e){return typeof Headers<"u"&&e instanceof Headers?Object.fromEntries([...e.entries()]):e}function se(e,...t){var s;const n=typeof AbortController=="function";let l={},a={immediate:!0,refetch:!1,timeout:0,updateDataOnError:!1};const o={method:"GET",type:"text",payload:void 0};t.length>0&&(et(t[0])?a={...a,...t[0]}:l=t[0]),t.length>1&&et(t[1])&&(a={...a,...t[1]});const{fetch:r=(s=ne)==null?void 0:s.fetch,initialData:f,timeout:g}=a,u=Le(),i=Le(),c=Le(),m=L(!1),y=L(!1),k=L(!1),S=L(null),b=te(null),A=te(null),w=te(f||null),v=C(()=>n&&y.value);let h,_;const O=()=>{n&&(h?.abort(),h=new AbortController,h.signal.onabort=()=>k.value=!0,l={...l,signal:h.signal})},p=x=>{y.value=x,m.value=!x};g&&(_=hn(O,g,{immediate:!1}));let d=0;const I=async(x=!1)=>{var Y,X;O(),p(!0),A.value=null,S.value=null,k.value=!1,d+=1;const he=d,oe={method:o.method,headers:{}};if(o.payload){const j=De(oe.headers),Q=B(o.payload);!o.payloadType&&Q&&Object.getPrototypeOf(Q)===Object.prototype&&!(Q instanceof FormData)&&(o.payloadType="json"),o.payloadType&&(j["Content-Type"]=(Y=Mn[o.payloadType])!=null?Y:o.payloadType),oe.body=o.payloadType==="json"?JSON.stringify(Q):Q}let Fe=!1;const pe={url:B(e),options:{...oe,...l},cancel:()=>{Fe=!0}};if(a.beforeFetch&&Object.assign(pe,await a.beforeFetch(pe)),Fe||!r)return p(!1),Promise.resolve(null);let re=null;return _&&_.start(),r(pe.url,{...oe,...pe.options,headers:{...De(oe.headers),...De((X=pe.options)==null?void 0:X.headers)}}).then(async j=>{if(b.value=j,S.value=j.status,re=await j.clone()[o.type](),!j.ok)throw w.value=f||null,new Error(j.statusText);return a.afterFetch&&({data:re}=await a.afterFetch({data:re,response:j})),w.value=re,u.trigger(j),j}).catch(async j=>{let Q=j.message||j.name;if(a.onFetchError&&({error:Q,data:re}=await a.onFetchError({data:re,error:j,response:b.value})),A.value=Q,a.updateDataOnError&&(w.value=re),i.trigger(j),x)throw j;return null}).finally(()=>{he===d&&p(!1),_&&_.stop(),c.trigger(null)})},V=Ce(a.refetch);Z([V,Ce(e)],([x])=>x&&I(),{deep:!0});const H={isFinished:m,statusCode:S,response:b,error:A,data:w,isFetching:y,canAbort:v,aborted:k,abort:O,execute:I,onFetchResponse:u.on,onFetchError:i.on,onFetchFinally:c.on,get:G("GET"),put:G("PUT"),post:G("POST"),delete:G("DELETE"),patch:G("PATCH"),head:G("HEAD"),options:G("OPTIONS"),json:F("json"),text:F("text"),blob:F("blob"),arrayBuffer:F("arrayBuffer"),formData:F("formData")};function G(x){return(Y,X)=>{if(!y.value)return o.method=x,o.payload=Y,o.payloadType=X,ge(o.payload)&&Z([V,Ce(o.payload)],([he])=>he&&I(),{deep:!0}),{...H,then(he,oe){return me().then(he,oe)}}}}function me(){return new Promise((x,Y)=>{mn(m).toBe(!0).then(()=>x(H)).catch(X=>Y(X))})}function F(x){return()=>{if(!y.value)return o.type=x,{...H,then(Y,X){return me().then(Y,X)}}}}return a.immediate&&Promise.resolve().then(()=>I()),{...H,then(x,Y){return me().then(x,Y)}}}function On(e,t,s={}){const{window:n=ne}=s;return Tn(e,t,n?.localStorage,s)}var kn=typeof global=="object"&&global&&global.Object===Object&&global;const Ln=kn;var Cn=typeof self=="object"&&self&&self.Object===Object&&self,Dn=Ln||Cn||Function("return this")();const bt=Dn;var xn=bt.Symbol;const Ae=xn;var _t=Object.prototype,Rn=_t.hasOwnProperty,Vn=_t.toString,ve=Ae?Ae.toStringTag:void 0;function Nn(e){var t=Rn.call(e,ve),s=e[ve];try{e[ve]=void 0;var n=!0}catch{}var l=Vn.call(e);return n&&(t?e[ve]=s:delete e[ve]),l}var Pn=Object.prototype,Un=Pn.toString;function jn(e){return Un.call(e)}var Hn="[object Null]",$n="[object Undefined]",tt=Ae?Ae.toStringTag:void 0;function Gn(e){return e==null?e===void 0?$n:Hn:tt&&tt in Object(e)?Nn(e):jn(e)}function Fn(e){return e!=null&&typeof e=="object"}var qn="[object Symbol]";function Bn(e){return typeof e=="symbol"||Fn(e)&&Gn(e)==qn}var Wn=/\s/;function Zn(e){for(var t=e.length;t--&&Wn.test(e.charAt(t)););return t}var Yn=/^\s+/;function Jn(e){return e&&e.slice(0,Zn(e)+1).replace(Yn,"")}function Pe(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var nt=0/0,zn=/^[-+]0x[0-9a-f]+$/i,Kn=/^0b[01]+$/i,Xn=/^0o[0-7]+$/i,Qn=parseInt;function st(e){if(typeof e=="number")return e;if(Bn(e))return nt;if(Pe(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=Pe(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=Jn(e);var s=Kn.test(e);return s||Xn.test(e)?Qn(e.slice(2),s?2:8):zn.test(e)?nt:+e}var es=function(){return bt.Date.now()};const xe=es;var ts="Expected a function",ns=Math.max,ss=Math.min;function W(e,t,s){var n,l,a,o,r,f,g=0,u=!1,i=!1,c=!0;if(typeof e!="function")throw new TypeError(ts);t=st(t)||0,Pe(s)&&(u=!!s.leading,i="maxWait"in s,a=i?ns(st(s.maxWait)||0,t):a,c="trailing"in s?!!s.trailing:c);function m(_){var O=n,p=l;return n=l=void 0,g=_,o=e.apply(p,O),o}function y(_){return g=_,r=setTimeout(b,t),u?m(_):o}function k(_){var O=_-f,p=_-g,d=t-O;return i?ss(d,a-p):d}function S(_){var O=_-f,p=_-g;return f===void 0||O>=t||O<0||i&&p>=a}function b(){var _=xe();if(S(_))return A(_);r=setTimeout(b,k(_))}function A(_){return r=void 0,c&&n?m(_):(n=l=void 0,o)}function w(){r!==void 0&&clearTimeout(r),g=0,n=f=l=r=void 0}function v(){return r===void 0?o:A(xe())}function h(){var _=xe(),O=S(_);if(n=arguments,l=this,f=_,O){if(r===void 0)return y(f);if(i)return clearTimeout(r),r=setTimeout(b,t),m(f)}return r===void 0&&(r=setTimeout(b,t)),o}return h.cancel=w,h.flush=v,h}var T=(e=>(e.COMMAND_PANEL_STARRED_PROJECTS="command_panel_starred_projects",e.COMMAND_PANEL_MOVE_PLACES="command_panel_move_places",e.TODO_RENDER_PROJECT_LOGOS="todo_render_project_logos",e.ISSUE_HIGHLIGHT_MINE="issue_highlight_mine",e.ISSUE_SHOW_MY_UNRESOLVED_THREADS="issue_show_my_unresolved_threads",e.ISSUE_USE_THREADS_BY_DEFAULT="issue_use_threads_by_default",e.ISSUE_RENDER_PROJECT_LOGO="issue_render_project_logo",e.ISSUE_VALIDATE_MISSING_EPIC="issue_validate_missing_epic",e.ISSUE_VALIDATE_MISSING_MILESTONE="issue_validate_missing_milestone",e.ISSUE_VALIDATE_MISSING_ITERATION="issue_validate_missing_iteration",e.ISSUE_VALIDATE_MISSING_WEIGHT="issue_validate_missing_weight",e.ISSUE_VALIDATE_UNRESOLVED_THREADS="issue_validate_unresolved_threads",e.ISSUE_REQUIRED_SCOPED_LABELS="issue_required_scoped_labels",e.MR_HIGHLIGHT_MINE="mr_highlight_mine",e.MR_SHOW_MY_UNRESOLVED_THREADS="mr_show_my_unresolved_threads",e.MR_USE_THREADS_BY_DEFAULT="mr_use_threads_by_default",e.MR_DIM_DRAFT="mr_dim_draft",e.MR_HOTKEY_VIEWED="mr_hotkey_viewed",e.MR_HOTKEY_VIEWED_NEXT="mr_hotkey_viewed_next",e))(T||{});const z=en("resize",()=>{const e=On("chrome-gitlab-enhancer",L(new Map));function t(n,l=null){const a=e.value.get(n);return a===void 0?l:a}function s(n,l){e.value.set(n,l)}return{getSetting:t,setSetting:s}}),ls="M10.34 1.22a.75.75 0 0 0-1.06 0L7.53 2.97 7 3.5l.53.53 1.75 1.75a.75.75 0 1 0 1.06-1.06l-.47-.47h.63c.69 0 1.25.56 1.25 1.25v4.614a2.501 2.501 0 1 0 1.5 0V5.5a2.75 2.75 0 0 0-2.75-2.75h-.63l.47-.47a.75.75 0 0 0 0-1.06zM13.5 12.5a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm-9 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm1.5 0a2.5 2.5 0 1 1-3.25-2.386V5.886a2.501 2.501 0 1 1 1.5 0v4.228A2.501 2.501 0 0 1 6 12.5zm-1.5-9a1 1 0 1 1-2 0 1 1 0 0 1 2 0z",Ue="M2.22 10.78a.75.75 0 0 1 0-1.06l5.252-5.252a.75.75 0 0 1 1.06 0l5.252 5.252a.75.75 0 1 1-1.06 1.06L8.001 6.06 3.28 10.78a.75.75 0 0 1-1.06 0Z",je="M2.22 5.22a.75.75 0 0 0 0 1.06l5.252 5.252a.75.75 0 0 0 1.06 0l5.252-5.252a.75.75 0 1 0-1.06-1.06L8.001 9.94 3.28 5.22a.75.75 0 0 0-1.06 0Z",as="M3 2.5h6a.5.5 0 0 1 .5.5v10a.5.5 0 0 1-.5.5H3a.5.5 0 0 1-.5-.5V3a.5.5 0 0 1 .5-.5ZM1 3a2 2 0 0 1 2-2h6a2 2 0 0 1 1.97 1.658l2.913 1.516a1.75 1.75 0 0 1 .744 2.36l-3.878 7.45a.753.753 0 0 1-.098.145c-.36.526-.965.871-1.651.871H3a2 2 0 0 1-2-2V3Zm10 7.254 2.297-4.413a.25.25 0 0 0-.106-.337L11 4.364v5.89Z",os="M6.272 3.864a4.5 4.5 0 1 0-.1 8.314.75.75 0 1 0-.557-1.393 3 3 0 1 1 .066-5.543.75.75 0 1 0 .59-1.378ZM11.5 11a3 3 0 1 0 0-6 3 3 0 0 0 0 6Zm0 1.5a4.5 4.5 0 1 0 0-9 4.5 4.5 0 0 0 0 9ZM6 8a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0Z",yt="M3.391 4.844a3.375 3.375 0 1 1 1.485 6.406h-.002a3.865 3.865 0 0 1-.06 0H.75a.75.75 0 0 0 0 1.5h12.379l-.97.97a.75.75 0 1 0 1.061 1.06l2.25-2.25L16 12l-.53-.53-2.25-2.25a.75.75 0 1 0-1.06 1.06l.97.97H8.392A4.874 4.874 0 1 0 .018 8.298a.75.75 0 1 0 1.495-.13A3.375 3.375 0 0 1 3.39 4.844Z",Et="m1.5 8.5 2.5-6h8l2.5 6h-13ZM0 8.569v2.181c0 .966.784 1.75 1.75 1.75H2v.75c0 .966.784 1.75 1.75 1.75h8.5a.75.75 0 0 0 0-1.5h-8.5a.25.25 0 0 1-.25-.25v-.75h10.25a.75.75 0 0 0 0-1.5h-12a.25.25 0 0 1-.25-.25V10h13a1.5 1.5 0 0 0 1.385-2.077l-2.629-6.308A1 1 0 0 0 12.333 1H3.667a1 1 0 0 0-.923.615L.115 7.923A1.498 1.498 0 0 0 0 8.569Z",St="M6.427.512A1.75 1.75 0 0 1 7.664 0H13v3h3v5.335c0 .465-.185.91-.513 1.239L9.573 15.48a1.75 1.75 0 0 1-2.473 0l-2.293-2.293-1.293-1.293-3-3a1.75 1.75 0 0 1 0-2.475L6.428.512ZM11.5 1.5V3h-.836a1.75 1.75 0 0 0-1.237.512L3.514 9.419c-.06.06-.115.123-.165.19L1.574 7.833a.25.25 0 0 1 0-.353l5.913-5.907a.25.25 0 0 1 .177-.073H11.5ZM5.866 12.126l-1.292-1.293a.25.25 0 0 1 0-.353l5.913-5.907a.25.25 0 0 1 .177-.073H14.5v3.835a.25.25 0 0 1-.073.177L8.513 14.42a.25.25 0 0 1-.353 0l-2.294-2.293ZM12 8a1 1 0 1 0 0-2 1 1 0 0 0 0 2Z",wt="M9.25 3.75a1.25 1.25 0 1 1-2.5 0 1.25 1.25 0 0 1 2.5 0ZM10.45 5a2.75 2.75 0 1 0-4.9 0H3.82a1 1 0 0 0-.98.804l-1.6 8A1 1 0 0 0 2.22 15h11.56a1 1 0 0 0 .98-1.196l-1.6-8A1 1 0 0 0 12.18 5h-1.73ZM8 6.5H4.23l-1.4 7h10.34l-1.4-7H8Z",It="M2 0a2 2 0 0 0-2 2v10.06l1.28-1.28 1.53-1.53H4V11a2 2 0 0 0 2 2h7l1.5 1.5L16 16V6a2 2 0 0 0-2-2h-2V2a2 2 0 0 0-2-2H2Zm8.5 4V2a.5.5 0 0 0-.5-.5H2a.5.5 0 0 0-.5.5v6.44l.47-.47.22-.22H4V6a2 2 0 0 1 2-2h4.5Zm3.56 7.94.44.439V6a.5.5 0 0 0-.5-.5H6a.5.5 0 0 0-.5.5v5a.5.5 0 0 0 .5.5h7.621l.44.44Z",rs=E("div",{class:"gl-pl-4 gl-py-2 gl-font-sm gl-font-weight-bold gl-display-flex gl-align-items-center"},[E("span",null,"Starred Projects")],-1),is={key:0,class:"gl-mb-0 gl-pl-0 gl-list-style-none"},us=["href"],cs={class:"gl-new-dropdown-item-text-wrapper"},ds={class:"gl-display-flex gl-align-items-center gl-gap-3"},fs=["src"],gs={key:1,class:"gl-avatar gl-avatar-s24 gl-align-self-start gl-flex-shrink-0 gl-avatar-identicon gl-avatar-identicon-bg6"},ms={class:"gl-flex-grow-1 gl-flex-shrink-1 gl-truncate-end"},hs=["href"],ps=["href"],vs=["href"],bs=["href"],_s=ae({__name:"StarredProjects",props:{gitlabUserId:{default:0},match:{default:""}},setup(e){const t=e,{gitlabUserId:s,match:n}=ce(t),{getSetting:l}=z(),a=L([]),o=L({}),r=C(()=>!!l(T.COMMAND_PANEL_STARRED_PROJECTS,!0));async function f(){if(!r.value)return;const{data:g}=await se(`/api/v4/users/${s.value}/starred_projects`).json();a.value=g.value,n.value!==""&&(a.value=a.value.filter(u=>u.name_with_namespace.toLowerCase().includes(n.value.toLowerCase()))),a.value.forEach(u=>{se(`/api/v4/projects/${u.id}/merge_requests?state=opened&wip=no&per_page=100`).json().then(({data:i})=>{o.value[u.id]=i.value.length})})}return Z([n,r],async()=>f()),le(async()=>{f()}),(g,u)=>(M(),D(ie,null,[rs,r.value?(M(),D("ul",is,[(M(!0),D(ie,null,_e(a.value,i=>(M(),D("li",{key:i.id,class:"show-on-focus-or-hover--context gl-new-dropdown-item",tabindex:"0"},[E("a",{class:"gl-new-dropdown-item-content",href:i.web_url},[E("span",cs,[E("div",ds,[i.avatar_url?(M(),D("img",{key:0,class:"gl-avatar gl-avatar-s24",src:i.avatar_url},null,8,fs)):(M(),D("div",gs,$(i.name.charAt(0)),1)),E("div",ms,$(i.name_with_namespace),1),E("div",null,[E("a",{class:"gl-link gl-reset-color! gl-mr-4 has-tooltip",href:`${i.web_url}/-/issues`,title:"Issues"},[N(U,{class:"gl-mr-2","is-gitlab":!0,path:R(as)},null,8,["path"]),E("span",null,$(i.open_issues_count),1)],8,hs),E("a",{class:"gl-link gl-reset-color! gl-mr-4 has-tooltip",href:`${i.web_url}/-/merge_requests?draft=no`,title:"Merge requests"},[N(U,{class:"gl-mr-2","is-gitlab":!0,path:R(ls)},null,8,["path"]),E("span",null,$(o.value?.[i.id]||0),1)],8,ps),E("a",{class:"gl-button btn btn-icon btn-sm btn-default gl-ml-4 gl-mr-3 has-tooltip",href:`${i.web_url}/-/boards?iteration_id=Current`,title:"Issue board"},[N(U,{class:"gl-icon s16",path:R(xt)},null,8,["path"])],8,vs),E("a",{class:"gl-button btn btn-icon btn-sm btn-default has-tooltip",href:`${i.web_url}/-/pipelines`,title:"Pipelines"},[N(U,{class:"gl-icon s16","is-gitlab":!0,path:R(os)},null,8,["path"])],8,bs)])])])],8,us)]))),128))])):P("",!0)],64))}}),ys=ae({__name:"CommandPanelEnhancer",props:{gitlabUserId:{default:0}},setup(e){const t=e,{gitlabUserId:s}=ce(t),{getSetting:n}=z(),l=L(null);let a=null;const o=L(null);let r=null;const f=L(null),g=L(""),u=C(()=>!!n(T.COMMAND_PANEL_MOVE_PLACES,!0));function i(){if(!u.value||g.value!==""||!o.value)return;const h=o.value.querySelectorAll(".global-search-results > ul > li");if(h?.length>=3){const _=h[0],O=h[3];O?.parentNode?.insertBefore(_,O),_.classList.add("gl-border-t","gl-border-t-gray-200","gl-pt-2","gl-mt-2","gl-mt-3")}}function c(){const h=o.value?.querySelector(".global-search-results ul")||null;h&&(l.value=document.createElement("li"),l.value.className="gl-p-0 gl-m-0 gl-pt-2",l.value?.setAttribute("bordered","true"),h.prepend(l.value))}function m(){i(),c()}function y(h){const _=h.target;g.value=_.value,v()}function k(){f.value?.removeEventListener("input",A),f.value=null,o.value=null,r?.(),r=null}function S(){const h=document.getElementById("super-sidebar-search-modal");if(o.value=document.getElementById("super-sidebar-search-modal___BV_modal_content_")||null,!h||!o.value){k();return}f.value=o.value?.querySelector("input#search"),f.value?.addEventListener("input",A),r?.();const{stop:_}=An(h,()=>{setTimeout(()=>{document.body.contains(o.value)||k()},300)},{childList:!0,subtree:!0});r=_,m()}function b(h){if(h.key==="/"){const _=h.target;["INPUT","TEXTAREA"].includes(_.tagName)||S()}}const A=W(y,300),w=W(b,200),v=W(m,200);return le(()=>{window.addEventListener("keydown",w),a=document.getElementById("super-sidebar-search"),a&&a.addEventListener("click",S)}),$e(()=>{window.removeEventListener("keydown",w),a&&a.removeEventListener("click",i)}),(h,_)=>(M(),D("div",null,[l.value?(M(),J(Me,{key:0,to:l.value},[N(_s,{"gitlab-user-id":R(s),match:g.value},null,8,["gitlab-user-id","match"])],8,["to"])):P("",!0)]))}}),Es={key:0},Ss={class:"gl-font-weight-bold"},ws={class:"gl-font-weight-bold"},Is=ae({__name:"MyUnresolvedThreads",props:{gitlabUserId:{default:0},currentProjectPath:{default:""},isMergeRequest:{type:Boolean,default:!0}},setup(e){const t=e,{gitlabUserId:s,currentProjectPath:n,isMergeRequest:l}=ce(t),{getSetting:a}=z(),o=te([]),r=L(new Map);function f(b){return Array.isArray(b)?b[0]:n.value}function g(b){return Array.isArray(b)?b[1]:b}function u(b){return("teleport-issuable-meta-"+f(b)+"-"+g(b)).replace(/\//g,"_")}const i=C(()=>l.value&&!!a(T.MR_SHOW_MY_UNRESOLVED_THREADS,!0)||!l.value&&!!a(T.ISSUE_SHOW_MY_UNRESOLVED_THREADS,!0)),c=C(()=>o.value.map(b=>u(b))),m=C(()=>{const b=new Map;return o.value.forEach(A=>{const w=g(A),v=(r.value.get(w)||[]).filter(h=>{const _=h?.notes?.[0]||null;return!!_?.resolvable&&!_?.resolved});b.set(u(A),v.length)}),b}),y=C(()=>{const b=new Map;return o.value.forEach(A=>{const w=g(A),v=(r.value.get(w)||[]).filter(h=>{const _=h?.notes?.[0]||null;return!!_?.resolvable&&!_?.resolved&&_?.author?.id===s.value});b.set(u(A),v.length)}),b});function k(){o.value.forEach(b=>{const A=f(b),w=g(b);se(`/api/v4/projects/${encodeURIComponent(A)}/${l.value?"merge_requests":"issues"}/${w}/discussions?per_page=100&is_custom=1`).json().then(({data:v})=>{v?.value&&r.value.set(w,v?.value||[])})})}function S(){const b=[];document.querySelectorAll(".issuable-list > li .issuable-reference").forEach(A=>{const w=A.textContent?.trim()?.split(l.value?"!":"#")||[];let v=w[0];w.length===2&&(v=w[0]===""?w[1]:w),b.push(v);const _=A.closest(l.value?".issuable-info-container":"li.issue")?.querySelector(".issuable-meta > ul"),O=document.createElement("div");O.className="gl-display-flex align-items-center",O.id=u(v),_?.append(O)}),o.value=b,k()}return Z(i,b=>{b&&S()},{immediate:!0}),(b,A)=>(M(),D("div",null,[i.value?(M(),D("div",Es,[(M(!0),D(ie,null,_e(c.value,w=>(M(),J(Me,{key:w,to:`#${w}`},[E("li",{class:K(["has-tooltip gl-display-none gl-sm-display-block gl-mr-3 md gl-text-orange-500!",{"badge badge-pill gl-badge badge-warning":m.value.get(w)}]),style:we({opacity:m.value.get(w)?1:.5}),title:"Unresolved threads"},[N(U,{class:"gl-icon s16 gl-mr-2",path:R(dt),style:{fill:"currentColor"}},null,8,["path"]),E("span",Ss,$(m.value.get(w)||0),1)],6),E("li",{class:K(["has-tooltip gl-display-none gl-sm-display-block md gl-text-red-500!",{"badge badge-pill gl-badge badge-danger":y.value.get(w)}]),style:we({opacity:y.value.get(w)?1:.5}),title:"My unresolved threads"},[N(U,{class:"gl-icon s16 gl-mr-2",path:R(Ie),style:{fill:"currentColor"}},null,8,["path"]),E("span",ws,$(y.value.get(w)||0),1)],6)],8,["to"]))),128))])):P("",!0)]))}});function Tt(){const{getSetting:e}=z(),t=C(()=>!!e(T.ISSUE_USE_THREADS_BY_DEFAULT,!0));if(window.location.href.includes("issues")&&!t.value)return;const s=C(()=>!!e(T.MR_USE_THREADS_BY_DEFAULT,!0));window.location.href.includes("merge_requests")&&!s.value||le(()=>{const n=document.querySelector("form.common-note-form textarea");if(n&&n.textContent!=="")return;document.querySelector('form.common-note-form .note-form-actions .js-comment-submit-button ul.gl-new-dropdown-contents li[data-testid="listbox-item-discussion"]')?.click()})}const Ts={style:{display:"flex"}},As={key:0,class:"gl-display-flex gl-align-items-center gl-pl-4 gl-rounded-base gl-min-h-7 gl-bg-red-100 gl-mr-3"},Ms={class:"gl-ml-3 btn-group"},Os=ae({__name:"MergeRequestDetail",props:{gitlabUserId:{default:0},iid:{default:0},currentProjectPath:{default:""}},setup(e){const t=e,{gitlabUserId:s,iid:n,currentProjectPath:l}=ce(t);Tt();const{getSetting:a}=z(),o=L(null),r=te([]),f=C(()=>!!a(T.MR_SHOW_MY_UNRESOLVED_THREADS,!0));async function g(){if(!n.value||!f.value)return;const{data:v}=await se(`/api/v4/projects/${encodeURIComponent(l.value)}/merge_requests/${n.value}/discussions?per_page=100&is_custom=1`).json();r.value=v?.value||[],y()}const u=W(async()=>{await g()},300);function i(v){if(v.target instanceof HTMLInputElement||v.target instanceof HTMLTextAreaElement||document.querySelectorAll(".diff-files-holder .vue-recycle-scroller").length)return;const _=document.querySelector('.diff-files-holder .file-actions input[type="checkbox"] + label');if(_){const O=_.getAttribute("for")||"";_?.click(),document.getElementById(O)?.blur()}}function c(v){v.target instanceof HTMLInputElement||v.target instanceof HTMLTextAreaElement||(i(v),setTimeout(()=>{document.querySelector(".diff-files-holder .next-page-item")?.click()},300))}function m(v){!v.shiftKey&&v.key=="v"&&a(T.MR_HOTKEY_VIEWED,!0)&&i(v),v.shiftKey&&v.key==="J"&&a(T.MR_HOTKEY_VIEWED_NEXT,!0)&&c(v)}function y(){o.value?.remove(),o.value=document.createElement("div");const v=document.querySelector(".merge-request-sticky-header:not(.gl-visibility-hidden) .merge-request-tabs + div");if(v){v.prepend(o.value);return}document.querySelector(".merge-request-details .merge-request-tabs-container > div")?.prepend(o.value)}const k=W(y,400);le(async()=>{window.addEventListener("keydown",m),window.addEventListener("scroll",k),window.addEventListener("message",v=>{v.data.type==="chrome-request-completed"&&!v.data.data.url.includes("is_custom=1")&&u?.()}),ye(()=>{y()}),u?.()}),$e(()=>{window.removeEventListener("keydown",m),window.removeEventListener("scroll",k)});const S=C(()=>r.value.filter(v=>{const h=v?.notes?.[0]||null;return!!h?.resolvable&&!h?.resolved&&h?.author?.id===s.value})),b=L(-1),A=C(()=>S.value.map(v=>`note_${v?.notes?.[0]?.id}`));function w(v){b.value===-1?b.value=v>0?0:S.value.length-1:b.value=(b.value+v+S.value.length)%S.value.length;const h=A.value[b.value];h&&document.getElementById(h)?.scrollIntoView({behavior:"smooth"})}return(v,h)=>(M(),D("div",Ts,[f.value&&o.value?(M(),J(Me,{key:0,to:o.value},[A.value.length?(M(),D("div",As,[E("span",null,$(S.value.length)+" my unresolved threads",1),E("div",Ms,[E("button",{class:"btn discussion-previous-btn gl-rounded-base! gl-px-2! btn-default btn-md gl-button btn-default-tertiary btn-icon",title:"Go to my previous unresolved thread",onClick:h[0]||(h[0]=q(_=>w(-1),["prevent"]))},[N(U,{class:"gl-button-icon","is-gitlab":!0,path:R(Ue)},null,8,["path"])]),E("button",{class:"btn discussion-previous-btn gl-rounded-base! gl-px-2! btn-default btn-md gl-button btn-default-tertiary btn-icon",title:"Go to my next unresolved thread",onClick:h[1]||(h[1]=q(_=>w(1),["prevent"]))},[N(U,{class:"gl-button-icon","is-gitlab":!0,path:R(je)},null,8,["path"])])])])):P("",!0)],8,["to"])):P("",!0)]))}}),ks={class:"toggle-icon"},Ls={class:"gl-icon s16",viewBox:"0 0 24 24"},Cs=["d"],Ds=ae({__name:"GToggle",props:{modelValue:{type:Boolean,default:!1}},emits:["update:model-value"],setup(e,{emit:t}){const s=e,{modelValue:n}=ce(s),l=t;return(a,o)=>(M(),D("button",{class:K([{"is-checked":R(n)},"gl-flex-shrink-0 gl-toggle"]),onClick:o[0]||(o[0]=q(r=>l("update:model-value",!R(n)),["prevent"]))},[E("span",ks,[(M(),D("svg",Ls,[E("path",{d:R(Rt)},null,8,Cs)]))])],2))}}),At=e=>($t("data-v-4f62e845"),e=e(),Gt(),e),xs={class:"dropdown b-dropdown gl-dropdown btn-group gl-display-block!"},Rs=At(()=>E("span",{class:"gl-dropdown-button-text"},"GitLab Enhancer",-1)),Vs=At(()=>E("span",{class:"badge gl-ml-2 badge-tier badge-pill gl-badge sm has-tooltip",title:"View changelog for updates, located in the extension pop-up."}," 2.3.1 ",-1)),Ns={class:"gl-dropdown-inner"},Ps={class:"gl-dropdown-contents"},Us={class:"gl-ml-3"},js=["onClick"],Hs=["title"],$s={class:"gl-dropdown-item-text-wrapper"},Gs={class:"gl-dropdown-item-text-primary"},Fs=["value","onInput"],qs=ae({__name:"Preferences",setup(e){const{getSetting:t,setSetting:s}=z(),n=L(null),l=L(!1);pn(n,()=>{l.value=!1});const a={"Command Panel":[{label:"Show starred projects",title:"",key:T.COMMAND_PANEL_STARRED_PROJECTS,icon:Vt,isGitlabIcon:!1,iconClassName:"",defaultValue:!0},{label:'Move "Places" after "Frequently visited"',title:"",key:T.COMMAND_PANEL_MOVE_PLACES,icon:Nt,isGitlabIcon:!1,iconClassName:"",defaultValue:!0}],"To-Do List":[{label:"Render project logos",title:"",key:T.TODO_RENDER_PROJECT_LOGOS,icon:qe,isGitlabIcon:!1,iconClassName:"",defaultValue:!0}],Issues:[{label:"Highlight my issues",title:"Highlighted with purple dashed border",key:T.ISSUE_HIGHLIGHT_MINE,icon:Be,isGitlabIcon:!1,iconClassName:"",defaultValue:!0},{label:"Show # of my unresolved threads",title:"",key:T.ISSUE_SHOW_MY_UNRESOLVED_THREADS,icon:Ie,isGitlabIcon:!1,iconClassName:"",defaultValue:!0},{label:'Use "Threads" in favor of "Comments" by default',title:"",key:T.ISSUE_USE_THREADS_BY_DEFAULT,icon:We,isGitlabIcon:!1,iconClassName:"",defaultValue:!0},{label:"Render project logos",title:"In issue overview & board",key:T.ISSUE_RENDER_PROJECT_LOGO,icon:qe,isGitlabIcon:!1,iconClassName:"",defaultValue:!0},{label:'Validate missing "Epic"',title:"",key:T.ISSUE_VALIDATE_MISSING_EPIC,icon:Et,isGitlabIcon:!0,iconClassName:"",defaultValue:!0},{label:'Validate missing "Milestone"',title:"",key:T.ISSUE_VALIDATE_MISSING_MILESTONE,icon:Pt,isGitlabIcon:!1,iconClassName:"",defaultValue:!0},{label:'Validate missing "Iteration"',title:"",key:T.ISSUE_VALIDATE_MISSING_ITERATION,icon:yt,isGitlabIcon:!0,iconClassName:"",defaultValue:!0},{label:'Validate missing "Weight"',title:"",key:T.ISSUE_VALIDATE_MISSING_WEIGHT,icon:wt,isGitlabIcon:!0,iconClassName:"",defaultValue:!0},{label:"Validate unresolved threads",title:"",key:T.ISSUE_VALIDATE_UNRESOLVED_THREADS,icon:It,isGitlabIcon:!0,iconClassName:"",defaultValue:!0},{label:"Required labels",title:"Use comma separated values",key:T.ISSUE_REQUIRED_SCOPED_LABELS,icon:St,isGitlabIcon:!0,iconClassName:"",defaultValue:""}],"Merge Requests":[{label:"Highlight my MRs",title:"Highlighted with purple dashed border",key:T.MR_HIGHLIGHT_MINE,icon:Be,isGitlabIcon:!1,iconClassName:"",defaultValue:!0},{label:"Show # of my unresolved threads",title:"",key:T.MR_SHOW_MY_UNRESOLVED_THREADS,icon:Ie,isGitlabIcon:!1,iconClassName:"",defaultValue:!0},{label:'Use "Threads" in favor of "Comments" by default',title:"",key:T.MR_USE_THREADS_BY_DEFAULT,icon:We,isGitlabIcon:!1,iconClassName:"",defaultValue:!0},{label:'Dim "Draft"',title:"",key:T.MR_DIM_DRAFT,icon:Ut,isGitlabIcon:!1,iconClassName:"",defaultValue:!0},{label:"Hotkey mark as viewed",title:"v",key:T.MR_HOTKEY_VIEWED,icon:Ze,isGitlabIcon:!1,iconClassName:"",defaultValue:!0},{label:"Hotkey mark as viewed & open next file",title:"Shift+J",key:T.MR_HOTKEY_VIEWED_NEXT,icon:Ze,isGitlabIcon:!1,iconClassName:"",defaultValue:!0}]};function o(f,g){const u=g.target;s(f,u?.value||"")}function r(f){typeof f.defaultValue=="boolean"&&s(f.key,!t(f.key,f.defaultValue))}return(f,g)=>(M(),D("div",{id:"chrome-gitlab-enhancer__preferences",ref_key:"rootPreferencesElement",ref:n},[E("div",xs,[E("button",{class:"btn dropdown-toggle btn-default btn-md gl-button gl-dropdown-toggle",style:{"box-shadow":"none","border-color":"#e24329","border-width":"1px",padding:"0.25rem 0.5rem"},onClick:g[0]||(g[0]=q(u=>l.value=!l.value,["prevent"]))},[N(jt,{style:{width:"24px",height:"24px"}}),Rs,Vs,N(U,{class:"gl-ml-2",path:R(Ht)},null,8,["path"])]),E("ul",{class:K([{show:l.value},"dropdown-menu"]),style:{right:"0",left:"initial",width:"320px"}},[E("div",Ns,[E("div",Ps,[(M(),D(ie,null,_e(a,(u,i)=>(M(),D(ie,{key:i},[E("label",Us,$(i),1),(M(!0),D(ie,null,_e(u,c=>(M(),D("li",{key:c.key,class:"gl-dropdown-item",onClick:m=>r(c)},[E("button",{class:K(["dropdown-item",{"has-tooltip":!!c.title}]),style:we({"flex-wrap":typeof c.defaultValue=="string"?"wrap":"nowrap"}),title:c.title,onClick:g[1]||(g[1]=q(()=>{},["prevent"]))},[c.icon?(M(),J(U,{key:0,class:K([c.iconClassName,"gl-mr-3"]),"is-gitlab":c.isGitlabIcon,path:c.icon,style:{flex:"0 0 auto"}},null,8,["class","is-gitlab","path"])):P("",!0),E("div",$s,[E("p",Gs,$(c.label),1)]),typeof c.defaultValue=="boolean"?(M(),J(Ds,{key:1,"model-value":!!R(t)(c.key,c.defaultValue)},null,8,["model-value"])):P("",!0),typeof c.defaultValue=="string"?(M(),D("input",{key:2,class:"form-control gl-border-gray-200",style:{"margin-left":"24px","margin-bottom":"8px"},type:"text",value:R(t)(c.key,c.defaultValue),onInput:m=>o(c.key,m)},null,40,Fs)):P("",!0)],14,Hs)],8,js))),128))],64))),64))])])],2)])],512))}});const Bs=ft(qs,[["__scopeId","data-v-4f62e845"]]),Ws={key:0,class:"gl-display-flex gl-align-items-center gl-pl-4 gl-rounded-base gl-min-h-7 gl-bg-red-100 gl-mr-3 has-tooltip",title:"My unresolved threads"},Zs={class:"gl-ml-3 btn-group"},Ys={key:1,class:"gl-display-flex gl-align-items-center gl-pl-4 gl-rounded-base gl-min-h-7 gl-bg-orange-100 gl-mr-3 has-tooltip",title:"Total unresolved threads"},Js={class:"gl-ml-3 btn-group"},zs={class:"gl-dropdown-button-text"},Ks={key:0,class:"badge gl-ml-2 badge-danger badge-pill gl-badge sm",style:{"background-color":"#ae1800",color:"#fdd4cd"}},Xs={class:"gl-dropdown-inner"},Qs={class:"gl-dropdown-contents"},el={class:"dropdown-item"},tl={class:"gl-dropdown-item-text-wrapper gl-display-flex gl-justify-content-center"},nl=ae({__name:"IssueDetail",props:{gitlabUserId:{default:0},iid:{default:0},currentProjectPath:{default:""}},setup(e){const t=e,{gitlabUserId:s,iid:n,currentProjectPath:l}=ce(t);Tt();const{getSetting:a}=z(),o=L(!1),r=L(null),f=te(null),g=te([]),u=L(-1),i=C(()=>!!a(T.ISSUE_SHOW_MY_UNRESOLVED_THREADS,!0)),c=C(()=>g.value.filter(p=>{const d=p?.notes?.[0]||null;return!!d?.resolvable&&!d?.resolved})),m=C(()=>c.value.filter(p=>p?.notes?.[0]?.author?.id===s.value)),y=C(()=>{const p=[{key:T.ISSUE_VALIDATE_MISSING_EPIC,label:"Epic",icon:Et,isGitlabIcon:!0,isValid:f.value?.epic!==null?1:0},{key:T.ISSUE_VALIDATE_MISSING_MILESTONE,label:"Milestone",icon:Bt,isGitlabIcon:!1,isValid:f.value?.milestone!==null?1:0},{key:T.ISSUE_VALIDATE_MISSING_ITERATION,label:"Iteration",icon:yt,isGitlabIcon:!0,isValid:f.value?.iteration!==null?1:0},{key:T.ISSUE_VALIDATE_MISSING_WEIGHT,label:"Weight",icon:wt,isGitlabIcon:!0,isValid:f.value?.weight!==null?1:0},{key:T.ISSUE_VALIDATE_UNRESOLVED_THREADS,label:"Unresolved threads",icon:It,isGitlabIcon:!0,isValid:c.value.length===0}],d=a(T.ISSUE_REQUIRED_SCOPED_LABELS,"");if(d!==""){const V=d.split(",").map(H=>({key:H,label:`Label "${H}"`,icon:St,isGitlabIcon:!0,isValid:f.value?.labels.some(G=>G.startsWith(H.trim()))?1:0}));p.push(...V)}return p}),k=C(()=>y.value.filter(p=>!!a(p.key,!0))),S=C(()=>k.value.filter(p=>!p.isValid).length);function b(){r.value?.remove(),r.value=document.createElement("div"),r.value?.classList.add("gl-ml-auto","gl-display-flex");const p=document.querySelector(".issue-sticky-header .issue-sticky-header-text");if(p){p.append(r.value);return}document.querySelector(".issue-details .detail-page-header-actions")?.prepend(r.value)}const A=W(b,400);async function w(){if(!n.value)return;const{data:p}=await se(`/api/v4/projects/${encodeURIComponent(l.value)}/issues/${n.value}?is_custom=1`).json();f.value=p?.value||null,ye(()=>b())}async function v(){if(!n.value)return;const{data:p}=await se(`/api/v4/projects/${encodeURIComponent(l.value)}/issues/${n.value}/discussions?is_custom=1`).json();g.value=p?.value||[]}const h=W(async()=>{await w()},300),_=W(async()=>{await v()},300);function O(p){u.value===-1?u.value=p>0?0:c.value.length-1:u.value=(u.value+p+c.value.length)%c.value.length;const d=`note_${c.value?.[u.value]?.notes?.[0]?.id}`;document.getElementById(d)?.scrollIntoView({behavior:"smooth"})}return le(()=>{window.addEventListener("scroll",A),window.addEventListener("message",p=>{p.data.type==="chrome-request-completed"&&!p.data.data.url.includes("is_custom=1")&&!p.data.data.url.includes("realtime_changes")&&(h(),_())}),h(),_()}),$e(()=>{window.removeEventListener("scroll",A)}),(p,d)=>(M(),D("div",null,[r.value?(M(),J(Me,{key:0,to:r.value},[i.value&&m.value.length?(M(),D("div",Ws,[N(U,{class:"gl-icon gl-mr-3",path:R(Ie)},null,8,["path"]),E("span",null,$(m.value.length),1),E("div",Zs,[E("button",{class:"btn discussion-previous-btn gl-rounded-base! gl-px-2! btn-default btn-md gl-button btn-default-tertiary btn-icon",title:"Go to my previous unresolved thread",onClick:d[0]||(d[0]=q(I=>O(-1),["prevent"]))},[N(U,{class:"gl-button-icon","is-gitlab":!0,path:R(Ue)},null,8,["path"])]),E("button",{class:"btn discussion-previous-btn gl-rounded-base! gl-px-2! btn-default btn-md gl-button btn-default-tertiary btn-icon",title:"Go to my next unresolved thread",onClick:d[1]||(d[1]=q(I=>O(1),["prevent"]))},[N(U,{class:"gl-button-icon","is-gitlab":!0,path:R(je)},null,8,["path"])])])])):P("",!0),c.value.length?(M(),D("div",Ys,[N(U,{class:"gl-icon gl-mr-3",path:R(dt)},null,8,["path"]),E("span",null,$(c.value.length),1),E("div",Js,[E("button",{class:"btn discussion-previous-btn gl-rounded-base! gl-px-2! btn-default btn-md gl-button btn-default-tertiary btn-icon",title:"Go to previous unresolved thread",onClick:d[2]||(d[2]=q(I=>O(-1),["prevent"]))},[N(U,{class:"gl-button-icon","is-gitlab":!0,path:R(Ue)},null,8,["path"])]),E("button",{class:"btn discussion-previous-btn gl-rounded-base! gl-px-2! btn-default btn-md gl-button btn-default-tertiary btn-icon",title:"Go to next unresolved thread",onClick:d[3]||(d[3]=q(I=>O(1),["prevent"]))},[N(U,{class:"gl-button-icon","is-gitlab":!0,path:R(je)},null,8,["path"])])])])):P("",!0),k.value.length>0?(M(),D("div",{key:2,class:"dropdown b-dropdown gl-dropdown btn-group gl-display-block!",onMouseenter:d[4]||(d[4]=q(I=>o.value=!0,["prevent"])),onMouseleave:d[5]||(d[5]=q(I=>o.value=!1,["prevent"]))},[E("button",{class:K([{"gl-bg-green-100!":!S.value,"gl-border-green-500!":!S.value,"gl-text-green-500!":!S.value,"gl-bg-red-100!":S.value,"gl-border-red-500!":S.value,"gl-text-red-500!":S.value,"gl-font-weight-bold!":S.value},"btn dropdown-toggle btn-default btn-md gl-button gl-dropdown-toggle gl-pl-3!"]),style:{"box-shadow":"none","border-width":"1px"}},[N(U,{class:"gl-mr-3",path:S.value?R(qt):R(Ft),style:we({fill:S.value?"#dd2b0e":"#108548"})},null,8,["path","style"]),E("span",zs,[Ye($(S.value?"Incomplete":"Valid")+" ",1),S.value?(M(),D("span",Ks,$(S.value),1)):P("",!0)]),P("",!0)],2),E("ul",{class:K([{show:o.value},"dropdown-menu"]),style:{right:"0",left:"initial",width:"auto","min-width":"0"}},[E("div",Xs,[E("div",Qs,[(M(!0),D(ie,null,_e(k.value,I=>(M(),D("li",{key:I.key,class:"gl-dropdown-item"},[E("button",el,[E("div",tl,[E("span",{class:K([{"badge-success":I.isValid,"badge-danger":!I.isValid},"badge badge-pill gl-badge lg"])},[N(U,{class:"gl-badge-icon gl-ml-1 gl-mr-3","is-gitlab":I.isGitlabIcon,path:I.icon},null,8,["is-gitlab","path"]),Ye(" "+$(I.label),1)],2)])])]))),128))])])],2)],32)):P("",!0)],8,["to"])):P("",!0)]))}});const sl=ft(nl,[["__scopeId","data-v-179ab41c"]]);async function ll(e){const{data:t}=await se(`/api/v4/projects/${encodeURIComponent(e)}?is_custom=1`).json();return t?.value||null}function al(){const{getSetting:e}=z(),t={},s=C(()=>!!e(T.TODO_RENDER_PROJECT_LOGOS,!0)),n=C(()=>!!e(T.ISSUE_RENDER_PROJECT_LOGO,!0));function l(o){const r=t[o];r&&(s.value&&window.location.href.includes("todos")&&document.querySelectorAll(`ul.todos-list a.todo-target-link[href*="${o}"]`).forEach(g=>{const u=g.closest("li")?.children?.[0]||null;if(u&&!u.children?.[0].classList.contains("chrome-gitlab-enhancer__project-avatar")){let i;r.includes("http")?(i=document.createElement("img"),i.setAttribute("src",r),i.setAttribute("style","width: 24px;")):(i=document.createElement("div"),i.className="gl-avatar gl-avatar-identicon gl-avatar-s24 gl-avatar-identicon-bg6",i.textContent=r),i.classList.add("gl-mr-4","chrome-gitlab-enhancer__project-avatar"),u.prepend(i),u.classList.add("gl-align-items-center")}}),n.value&&(window.location.href.includes("issues")&&document.querySelectorAll(`li.issue a.issue-title-text[href*="${o}"]`).forEach(g=>{const u=g?.parentElement?.parentElement?.parentElement||null;if(u&&!u.children?.[0].classList.contains("chrome-gitlab-enhancer__project-avatar")){let i;r.includes("http")?(i=document.createElement("img"),i.setAttribute("src",r),i.setAttribute("style","width: 24px;")):(i=document.createElement("div"),i.className="gl-avatar gl-avatar-identicon gl-avatar-s24 gl-avatar-identicon-bg6",i.textContent=r),i.classList.add("gl-mr-5","chrome-gitlab-enhancer__project-avatar"),u.prepend(i),u.classList.add("gl-align-items-center")}}),window.location.href.includes("boards")&&r.includes("http")&&document.querySelectorAll(`li.board-card span[title="${o}"]`).forEach(g=>{if(g.parentElement&&g.previousElementSibling){const u=document.createElement("img");u.setAttribute("src",r),u.setAttribute("style","width: 20px;"),u.classList.add("chrome-gitlab-enhancer__project-avatar"),g.parentElement.replaceChild(u,g.previousElementSibling),g.parentElement.classList.add("gl-display-flex","gl-align-items-center")}})))}function a(){const o=[];s.value&&window.location.href.includes("todos")&&document.querySelectorAll("ul.todos-list a.todo-target-link").forEach(f=>{const u=(f.getAttribute("href")||"").substring(1).split("/-/")[0]||"";!u||o.includes(u)||o.push(u)}),n.value&&(window.location.href.includes("issues")&&document.querySelectorAll("ul.issues-list li.issue .issuable-info .issuable-reference").forEach(f=>{const g=f?.textContent?.split("#")?.[0].trim()||"";!g||o.includes(g)||o.push(g)}),window.location.href.includes("boards")&&document.querySelectorAll("div.boards-app ul.board-list li.board-card").forEach(f=>{const u=(f.getAttribute("data-item-path")||"").split("#")[0]||"";!u||o.includes(u)||o.push(u)})),o.forEach(r=>{t[r]?l(r):ll(r).then(f=>{t[r]=f?.avatar_url||f?.name?.charAt(0)||null,l(r)})})}return{render:W(a,500)}}function ol(){const{getSetting:e}=z(),t=C(()=>!!e(T.ISSUE_HIGHLIGHT_MINE,!0)),s=C(()=>!!e(T.MR_HIGHLIGHT_MINE,!0));function n(l){l&&(t.value&&(window.location.href.includes("boards")&&document.querySelectorAll(`.board-card a[href="/${l}"]`).forEach(o=>{o.closest("li.board-card")?.classList.add("gl-border","gl-border-2","gl-border-dashed","gl-border-purple-700")}),window.location.href.includes("issues")&&!window.location.href.includes("dashboard")&&document.querySelectorAll(`.issuable-meta a.gl-avatar-link[href$="/${l}"]`).forEach(o=>{o.closest(".issuable-info-container")?.closest("li")?.classList.add("gl-border!","gl-border-2!","gl-rounded-base!","gl-border-dashed!","gl-border-purple-700!","gl-m-3!")})),s.value&&window.location.href.includes("merge_requests")&&!window.location.href.includes("dashboard")&&document.querySelectorAll(`.issuable-meta li:not(.issuable-reviewers) a.author-link[href$="/${l}"]`).forEach(o=>{o.closest(".issuable-info-container")?.closest("li")?.classList.add("gl-border!","gl-border-2!","gl-rounded-base!","gl-border-dashed!","gl-border-purple-700!","gl-m-3!")}))}return{highlight:W(n,500)}}function rl(){const{getSetting:e}=z();function t(){!e(T.MR_DIM_DRAFT,!0)||!window.location.href.includes("merge_requests")||document.querySelectorAll("li.merge-request").forEach(s=>{s.textContent?.includes("Draft:")&&s.classList.add("merge-request-draft")})}return{dim:W(t,300)}}const il={key:0},ul=ae({__name:"App",setup(e){const{render:t}=al(),{highlight:s}=ol(),{dim:n}=rl(),l=L(0),a=L(""),o=L(!1),r=C(()=>!!l.value),f=_n(),g=C(()=>f.value?.pathname?.split("/-/")?.[0].slice(1)||""),u=C(()=>{if(!f.value?.pathname)return 0;const y=/\/(\d+)\/?.*$/.exec(f.value.pathname);return y?.length===2?parseInt(y[1],10):0}),i=C(()=>f.value.pathname?.includes("merge_requests")),c=C(()=>f.value.pathname?.includes("issues"));return le(()=>{window.addEventListener("message",m=>{m.data.type==="chrome-request-completed"&&!m.data.data.url.includes("is_custom=1")&&(t(),s(a.value),n(),o.value=!!document.querySelector("ul.issuable-list > li:first-child .issuable-reference"))}),se("/api/v4/user").json().then(({data:m})=>{l.value=m?.value?.id||0,a.value=m?.value?.username||""})}),(m,y)=>r.value?(M(),D("div",il,[N(Bs),l.value?(M(),J(ys,{key:0,"gitlab-user-id":l.value},null,8,["gitlab-user-id"])):P("",!0),c.value&&u.value?(M(),J(sl,{key:1,"current-project-path":g.value,"gitlab-user-id":l.value,iid:u.value},null,8,["current-project-path","gitlab-user-id","iid"])):P("",!0),o.value&&!u.value?(M(),J(Is,{key:2,"current-project-path":g.value,"gitlab-user-id":l.value,"is-merge-request":i.value},null,8,["current-project-path","gitlab-user-id","is-merge-request"])):P("",!0),i.value&&u.value?(M(),J(Os,{key:3,"current-project-path":g.value,"gitlab-user-id":l.value,iid:u.value},null,8,["current-project-path","gitlab-user-id","iid"])):P("",!0)])):P("",!0)}}),Mt=Wt(ul);Mt.use(Yt());Mt.mount("#chrome-gitlab-enhancer");
