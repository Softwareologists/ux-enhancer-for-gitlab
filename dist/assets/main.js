import{e as at,r as C,m as ot,i as Ot,w as G,a as rt,b as me,c as it,t as Lt,h as kt,g as ut,o as ct,n as Ee,d as de,f as D,j as Ct,k as He,l as Dt,u as x,p as te,q as dt,s as ee,v as ne,x as k,F as K,y as ce,z as N,A as E,B as w,C as $,D as P,_ as U,E as Rt,G as Ge,H as F,T as Se,I as ft,J as X,K as he,L as Te,M as W,N as xt,O as Nt,P as Vt,Q as Be,R as We,S as Ze,U as Pt,V as Ut,W as Ye,X as jt,Y as $t,Z as Ht,$ as Gt,a0 as gt,a1 as Je,a2 as Ft,a3 as qt,a4 as Bt,a5 as Wt}from"./SvgLogo.js";var Zt=!1;/*!
 * pinia v2.1.7
 * (c) 2023 Eduardo San Martin Morote
 * @license MIT
 */let mt;const Oe=e=>mt=e,ht=Symbol();function xe(e){return e&&typeof e=="object"&&Object.prototype.toString.call(e)==="[object Object]"&&typeof e.toJSON!="function"}var ye;(function(e){e.direct="direct",e.patchObject="patch object",e.patchFunction="patch function"})(ye||(ye={}));function Yt(){const e=at(!0),t=e.run(()=>C({}));let s=[],n=[];const l=ot({install(a){Oe(l),l._a=a,a.provide(ht,l),a.config.globalProperties.$pinia=l,n.forEach(o=>s.push(o)),n=[]},use(a){return!this._a&&!Zt?n.push(a):s.push(a),this},_p:s,_a:null,_e:e,_s:new Map,state:t});return l}const pt=()=>{};function ze(e,t,s,n=pt){e.push(t);const l=()=>{const a=e.indexOf(t);a>-1&&(e.splice(a,1),n())};return!s&&ut()&&ct(l),l}function fe(e,...t){e.slice().forEach(s=>{s(...t)})}const Jt=e=>e();function Ne(e,t){e instanceof Map&&t instanceof Map&&t.forEach((s,n)=>e.set(n,s)),e instanceof Set&&t instanceof Set&&t.forEach(e.add,e);for(const s in t){if(!t.hasOwnProperty(s))continue;const n=t[s],l=e[s];xe(l)&&xe(n)&&e.hasOwnProperty(s)&&!me(n)&&!it(n)?e[s]=Ne(l,n):e[s]=n}return e}const zt=Symbol();function Kt(e){return!xe(e)||!e.hasOwnProperty(zt)}const{assign:ae}=Object;function Xt(e){return!!(me(e)&&e.effect)}function Qt(e,t,s,n){const{state:l,actions:a,getters:o}=t,i=s.state.value[e];let d;function g(){i||(s.state.value[e]=l?l():{});const u=de(s.state.value[e]);return ae(u,a,Object.keys(o||{}).reduce((r,c)=>(r[c]=ot(D(()=>{Oe(s);const m=s._s.get(e);return o[c].call(m,m)})),r),{}))}return d=vt(e,g,t,s,n,!0),d}function vt(e,t,s={},n,l,a){let o;const i=ae({actions:{}},s),d={deep:!0};let g,u,r=[],c=[],m;const h=n.state.value[e];!a&&!h&&(n.state.value[e]={}),C({});let O;function S(v){let f;g=u=!1,typeof v=="function"?(v(n.state.value[e]),f={type:ye.patchFunction,storeId:e,events:m}):(Ne(n.state.value[e],v),f={type:ye.patchObject,payload:v,storeId:e,events:m});const T=O=Symbol();Ee().then(()=>{O===T&&(g=!0)}),u=!0,fe(r,f,n.state.value[e])}const _=a?function(){const{state:f}=s,T=f?f():{};this.$patch(V=>{ae(V,T)})}:pt;function M(){o.stop(),r=[],c=[],n._s.delete(e)}function I(v,f){return function(){Oe(n);const T=Array.from(arguments),V=[],H=[];function q(R){V.push(R)}function pe(R){H.push(R)}fe(c,{args:T,name:v,store:p,after:q,onError:pe});let B;try{B=f.apply(this&&this.$id===e?this:p,T)}catch(R){throw fe(H,R),R}return B instanceof Promise?B.then(R=>(fe(V,R),R)).catch(R=>(fe(H,R),Promise.reject(R))):(fe(V,B),B)}}const b={_p:n,$id:e,$onAction:ze.bind(null,c),$patch:S,$reset:_,$subscribe(v,f={}){const T=ze(r,v,f.detached,()=>V()),V=o.run(()=>G(()=>n.state.value[e],H=>{(f.flush==="sync"?u:g)&&v({storeId:e,type:ye.direct,events:m},H)},ae({},d,f)));return T},$dispose:M},p=rt(b);n._s.set(e,p);const L=(n._a&&n._a.runWithContext||Jt)(()=>n._e.run(()=>(o=at()).run(t)));for(const v in L){const f=L[v];if(me(f)&&!Xt(f)||it(f))a||(h&&Kt(f)&&(me(f)?f.value=h[v]:Ne(f,h[v])),n.state.value[e][v]=f);else if(typeof f=="function"){const T=I(v,f);L[v]=T,i.actions[v]=f}}return ae(p,L),ae(Lt(p),L),Object.defineProperty(p,"$state",{get:()=>n.state.value[e],set:v=>{S(f=>{ae(f,v)})}}),n._p.forEach(v=>{ae(p,o.run(()=>v({store:p,app:n._a,pinia:n,options:i})))}),h&&a&&s.hydrate&&s.hydrate(p.$state,h),g=!0,u=!0,p}function en(e,t,s){let n,l;const a=typeof t=="function";typeof e=="string"?(n=e,l=a?s:t):(l=e,n=e.id);function o(i,d){const g=kt();return i=i||(g?Ot(ht,null):null),i&&Oe(i),i=mt,i._s.has(n)||(a?vt(n,t,l,i):Qt(n,l,i)),i._s.get(n)}return o.$id=n,o}function Le(e){return ut()?(ct(e),!0):!1}function ke(){const e=new Set,t=l=>{e.delete(l)};return{on:l=>{e.add(l);const a=()=>t(l);return Le(a),{off:a}},off:t,trigger:(...l)=>Promise.all(Array.from(e).map(a=>a(...l)))}}function Z(e){return typeof e=="function"?e():x(e)}const Fe=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const tn=Object.prototype.toString,nn=e=>tn.call(e)==="[object Object]",Ae=()=>{},sn=ln();function ln(){var e,t;return Fe&&((e=window?.navigator)==null?void 0:e.userAgent)&&(/iP(ad|hone|od)/.test(window.navigator.userAgent)||((t=window?.navigator)==null?void 0:t.maxTouchPoints)>2&&/iPad|Macintosh/.test(window?.navigator.userAgent))}function an(e,t){function s(...n){return new Promise((l,a)=>{Promise.resolve(e(()=>t.apply(this,n),{fn:t,thisArg:this,args:n})).then(l).catch(a)})}return s}const bt=e=>e();function on(e=bt){const t=C(!0);function s(){t.value=!1}function n(){t.value=!0}const l=(...a)=>{t.value&&e(...a)};return{isActive:He(t),pause:s,resume:n,eventFilter:l}}function Ke(e,t=!1,s="Timeout"){return new Promise((n,l)=>{setTimeout(t?()=>l(s):n,e)})}function rn(e,...t){return t.some(s=>s in e)}function un(e){return Object.entries(e)}function cn(e){return e||dt()}function Ce(...e){if(e.length!==1)return Ct(...e);const t=e[0];return typeof t=="function"?He(Dt(()=>({get:t,set:Ae}))):C(t)}function dn(e,t,s={}){const{eventFilter:n=bt,...l}=s;return G(e,an(n,t),l)}function fn(e,t,s={}){const{eventFilter:n,...l}=s,{eventFilter:a,pause:o,resume:i,isActive:d}=on(n);return{stop:dn(e,t,{...l,eventFilter:a}),pause:o,resume:i,isActive:d}}function gn(e,t=!0,s){const n=cn(s);n?te(e,n):t?e():Ee(e)}function Ve(e,t=!1){function s(r,{flush:c="sync",deep:m=!1,timeout:h,throwOnTimeout:O}={}){let S=null;const M=[new Promise(I=>{S=G(e,b=>{r(b)!==t&&(S?.(),I(b))},{flush:c,deep:m,immediate:!0})})];return h!=null&&M.push(Ke(h,O).then(()=>Z(e)).finally(()=>S?.())),Promise.race(M)}function n(r,c){if(!me(r))return s(b=>b===r,c);const{flush:m="sync",deep:h=!1,timeout:O,throwOnTimeout:S}=c??{};let _=null;const I=[new Promise(b=>{_=G([e,r],([p,y])=>{t!==(p===y)&&(_?.(),b(p))},{flush:m,deep:h,immediate:!0})})];return O!=null&&I.push(Ke(O,S).then(()=>Z(e)).finally(()=>(_?.(),Z(e)))),Promise.race(I)}function l(r){return s(c=>!!c,r)}function a(r){return n(null,r)}function o(r){return n(void 0,r)}function i(r){return s(Number.isNaN,r)}function d(r,c){return s(m=>{const h=Array.from(m);return h.includes(r)||h.includes(Z(r))},c)}function g(r){return u(1,r)}function u(r=1,c){let m=-1;return s(()=>(m+=1,m>=r),c)}return Array.isArray(Z(e))?{toMatch:s,toContains:d,changed:g,changedTimes:u,get not(){return Ve(e,!t)}}:{toMatch:s,toBe:n,toBeTruthy:l,toBeNull:a,toBeNaN:i,toBeUndefined:o,changed:g,changedTimes:u,get not(){return Ve(e,!t)}}}function mn(e){return Ve(e)}function hn(e,t,s={}){const{immediate:n=!0}=s,l=C(!1);let a=null;function o(){a&&(clearTimeout(a),a=null)}function i(){l.value=!1,o()}function d(...g){o(),l.value=!0,a=setTimeout(()=>{l.value=!1,a=null,e(...g)},Z(t))}return n&&(l.value=!0,Fe&&d()),Le(i),{isPending:He(l),start:d,stop:i}}function ge(e){var t;const s=Z(e);return(t=s?.$el)!=null?t:s}const oe=Fe?window:void 0;function ue(...e){let t,s,n,l;if(typeof e[0]=="string"||Array.isArray(e[0])?([s,n,l]=e,t=oe):[t,s,n,l]=e,!t)return Ae;Array.isArray(s)||(s=[s]),Array.isArray(n)||(n=[n]);const a=[],o=()=>{a.forEach(u=>u()),a.length=0},i=(u,r,c,m)=>(u.addEventListener(r,c,m),()=>u.removeEventListener(r,c,m)),d=G(()=>[ge(t),Z(l)],([u,r])=>{if(o(),!u)return;const c=nn(r)?{...r}:r;a.push(...s.flatMap(m=>n.map(h=>i(u,m,h,c))))},{immediate:!0,flush:"post"}),g=()=>{d(),o()};return Le(g),g}let Xe=!1;function pn(e,t,s={}){const{window:n=oe,ignore:l=[],capture:a=!0,detectIframe:o=!1}=s;if(!n)return;sn&&!Xe&&(Xe=!0,Array.from(n.document.body.children).forEach(c=>c.addEventListener("click",Ae)),n.document.documentElement.addEventListener("click",Ae));let i=!0;const d=c=>l.some(m=>{if(typeof m=="string")return Array.from(n.document.querySelectorAll(m)).some(h=>h===c.target||c.composedPath().includes(h));{const h=ge(m);return h&&(c.target===h||c.composedPath().includes(h))}}),u=[ue(n,"click",c=>{const m=ge(e);if(!(!m||m===c.target||c.composedPath().includes(m))){if(c.detail===0&&(i=!d(c)),!i){i=!0;return}t(c)}},{passive:!0,capture:a}),ue(n,"pointerdown",c=>{const m=ge(e);i=!d(c)&&!!(m&&!c.composedPath().includes(m))},{passive:!0}),o&&ue(n,"blur",c=>{setTimeout(()=>{var m;const h=ge(e);((m=n.document.activeElement)==null?void 0:m.tagName)==="IFRAME"&&!h?.contains(n.document.activeElement)&&t(c)},0)})].filter(Boolean);return()=>u.forEach(c=>c())}function vn(){const e=C(!1);return dt()&&te(()=>{e.value=!0}),e}function bn(e){const t=vn();return D(()=>(t.value,!!e()))}const Qe=["hash","host","hostname","href","pathname","port","protocol","search"];function _n(e={}){const{window:t=oe}=e,s=Object.fromEntries(Qe.map(a=>[a,C()]));for(const[a,o]of un(s))G(o,i=>{!t?.location||t.location[a]===i||(t.location[a]=i)});const n=a=>{var o;const{state:i,length:d}=t?.history||{},{origin:g}=t?.location||{};for(const u of Qe)s[u].value=(o=t?.location)==null?void 0:o[u];return rt({trigger:a,state:i,length:d,origin:g,...s})},l=C(n("load"));return t&&(ue(t,"popstate",()=>l.value=n("popstate"),{passive:!0}),ue(t,"hashchange",()=>l.value=n("hashchange"),{passive:!0})),l}const we=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ie="__vueuse_ssr_handlers__",yn=En();function En(){return Ie in we||(we[Ie]=we[Ie]||{}),we[Ie]}function Sn(e,t){return yn[e]||t}function wn(e){return e==null?"any":e instanceof Set?"set":e instanceof Map?"map":e instanceof Date?"date":typeof e=="boolean"?"boolean":typeof e=="string"?"string":typeof e=="object"?"object":Number.isNaN(e)?"any":"number"}const In={boolean:{read:e=>e==="true",write:e=>String(e)},object:{read:e=>JSON.parse(e),write:e=>JSON.stringify(e)},number:{read:e=>Number.parseFloat(e),write:e=>String(e)},any:{read:e=>e,write:e=>String(e)},string:{read:e=>e,write:e=>String(e)},map:{read:e=>new Map(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e.entries()))},set:{read:e=>new Set(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e))},date:{read:e=>new Date(e),write:e=>e.toISOString()}},et="vueuse-storage";function Tn(e,t,s,n={}){var l;const{flush:a="pre",deep:o=!0,listenToStorageChanges:i=!0,writeDefaults:d=!0,mergeDefaults:g=!1,shallow:u,window:r=oe,eventFilter:c,onError:m=f=>{console.error(f)},initOnMounted:h}=n,O=(u?ee:C)(typeof t=="function"?t():t);if(!s)try{s=Sn("getDefaultStorage",()=>{var f;return(f=oe)==null?void 0:f.localStorage})()}catch(f){m(f)}if(!s)return O;const S=Z(t),_=wn(S),M=(l=n.serializer)!=null?l:In[_],{pause:I,resume:b}=fn(O,()=>p(O.value),{flush:a,deep:o,eventFilter:c});return r&&i&&gn(()=>{ue(r,"storage",v),ue(r,et,L),h&&v()}),h||v(),O;function p(f){try{if(f==null)s.removeItem(e);else{const T=M.write(f),V=s.getItem(e);V!==T&&(s.setItem(e,T),r&&r.dispatchEvent(new CustomEvent(et,{detail:{key:e,oldValue:V,newValue:T,storageArea:s}})))}}catch(T){m(T)}}function y(f){const T=f?f.newValue:s.getItem(e);if(T==null)return d&&S!=null&&s.setItem(e,M.write(S)),S;if(!f&&g){const V=M.read(T);return typeof g=="function"?g(V,S):_==="object"&&!Array.isArray(V)?{...S,...V}:V}else return typeof T!="string"?T:M.read(T)}function L(f){v(f.detail)}function v(f){if(!(f&&f.storageArea!==s)){if(f&&f.key==null){O.value=S;return}if(!(f&&f.key!==e)){I();try{f?.newValue!==M.write(O.value)&&(O.value=y(f))}catch(T){m(T)}finally{f?Ee(b):b()}}}}}function An(e,t,s={}){const{window:n=oe,...l}=s;let a;const o=bn(()=>n&&"MutationObserver"in n),i=()=>{a&&(a.disconnect(),a=void 0)},d=G(()=>ge(e),r=>{i(),o.value&&n&&r&&(a=new MutationObserver(t),a.observe(r,l))},{immediate:!0}),g=()=>a?.takeRecords(),u=()=>{i(),d()};return Le(u),{isSupported:o,stop:u,takeRecords:g}}const Mn={json:"application/json",text:"text/plain"};function tt(e){return e&&rn(e,"immediate","refetch","initialData","timeout","beforeFetch","afterFetch","onFetchError","fetch","updateDataOnError")}function De(e){return typeof Headers<"u"&&e instanceof Headers?Object.fromEntries([...e.entries()]):e}function Q(e,...t){var s;const n=typeof AbortController=="function";let l={},a={immediate:!0,refetch:!1,timeout:0,updateDataOnError:!1};const o={method:"GET",type:"text",payload:void 0};t.length>0&&(tt(t[0])?a={...a,...t[0]}:l=t[0]),t.length>1&&tt(t[1])&&(a={...a,...t[1]});const{fetch:i=(s=oe)==null?void 0:s.fetch,initialData:d,timeout:g}=a,u=ke(),r=ke(),c=ke(),m=C(!1),h=C(!1),O=C(!1),S=C(null),_=ee(null),M=ee(null),I=ee(d||null),b=D(()=>n&&h.value);let p,y;const L=()=>{n&&(p?.abort(),p=new AbortController,p.signal.onabort=()=>O.value=!0,l={...l,signal:p.signal})},v=R=>{h.value=R,m.value=!R};g&&(y=hn(L,g,{immediate:!1}));let f=0;const T=async(R=!1)=>{var z,se;L(),v(!0),M.value=null,S.value=null,O.value=!1,f+=1;const ve=f,re={method:o.method,headers:{}};if(o.payload){const j=De(re.headers),le=Z(o.payload);!o.payloadType&&le&&Object.getPrototypeOf(le)===Object.prototype&&!(le instanceof FormData)&&(o.payloadType="json"),o.payloadType&&(j["Content-Type"]=(z=Mn[o.payloadType])!=null?z:o.payloadType),re.body=o.payloadType==="json"?JSON.stringify(le):le}let qe=!1;const be={url:Z(e),options:{...re,...l},cancel:()=>{qe=!0}};if(a.beforeFetch&&Object.assign(be,await a.beforeFetch(be)),qe||!i)return v(!1),Promise.resolve(null);let ie=null;return y&&y.start(),i(be.url,{...re,...be.options,headers:{...De(re.headers),...De((se=be.options)==null?void 0:se.headers)}}).then(async j=>{if(_.value=j,S.value=j.status,ie=await j.clone()[o.type](),!j.ok)throw I.value=d||null,new Error(j.statusText);return a.afterFetch&&({data:ie}=await a.afterFetch({data:ie,response:j})),I.value=ie,u.trigger(j),j}).catch(async j=>{let le=j.message||j.name;if(a.onFetchError&&({error:le,data:ie}=await a.onFetchError({data:ie,error:j,response:_.value})),M.value=le,a.updateDataOnError&&(I.value=ie),r.trigger(j),R)throw j;return null}).finally(()=>{ve===f&&v(!1),y&&y.stop(),c.trigger(null)})},V=Ce(a.refetch);G([V,Ce(e)],([R])=>R&&T(),{deep:!0});const H={isFinished:m,statusCode:S,response:_,error:M,data:I,isFetching:h,canAbort:b,aborted:O,abort:L,execute:T,onFetchResponse:u.on,onFetchError:r.on,onFetchFinally:c.on,get:q("GET"),put:q("PUT"),post:q("POST"),delete:q("DELETE"),patch:q("PATCH"),head:q("HEAD"),options:q("OPTIONS"),json:B("json"),text:B("text"),blob:B("blob"),arrayBuffer:B("arrayBuffer"),formData:B("formData")};function q(R){return(z,se)=>{if(!h.value)return o.method=R,o.payload=z,o.payloadType=se,me(o.payload)&&G([V,Ce(o.payload)],([ve])=>ve&&T(),{deep:!0}),{...H,then(ve,re){return pe().then(ve,re)}}}}function pe(){return new Promise((R,z)=>{mn(m).toBe(!0).then(()=>R(H)).catch(se=>z(se))})}function B(R){return()=>{if(!h.value)return o.type=R,{...H,then(z,se){return pe().then(z,se)}}}}return a.immediate&&Promise.resolve().then(()=>T()),{...H,then(R,z){return pe().then(R,z)}}}function On(e,t,s={}){const{window:n=oe}=s;return Tn(e,t,n?.localStorage,s)}var Ln=typeof global=="object"&&global&&global.Object===Object&&global;const kn=Ln;var Cn=typeof self=="object"&&self&&self.Object===Object&&self,Dn=kn||Cn||Function("return this")();const _t=Dn;var Rn=_t.Symbol;const Me=Rn;var yt=Object.prototype,xn=yt.hasOwnProperty,Nn=yt.toString,_e=Me?Me.toStringTag:void 0;function Vn(e){var t=xn.call(e,_e),s=e[_e];try{e[_e]=void 0;var n=!0}catch{}var l=Nn.call(e);return n&&(t?e[_e]=s:delete e[_e]),l}var Pn=Object.prototype,Un=Pn.toString;function jn(e){return Un.call(e)}var $n="[object Null]",Hn="[object Undefined]",nt=Me?Me.toStringTag:void 0;function Gn(e){return e==null?e===void 0?Hn:$n:nt&&nt in Object(e)?Vn(e):jn(e)}function Fn(e){return e!=null&&typeof e=="object"}var qn="[object Symbol]";function Bn(e){return typeof e=="symbol"||Fn(e)&&Gn(e)==qn}var Wn=/\s/;function Zn(e){for(var t=e.length;t--&&Wn.test(e.charAt(t)););return t}var Yn=/^\s+/;function Jn(e){return e&&e.slice(0,Zn(e)+1).replace(Yn,"")}function Pe(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var st=0/0,zn=/^[-+]0x[0-9a-f]+$/i,Kn=/^0b[01]+$/i,Xn=/^0o[0-7]+$/i,Qn=parseInt;function lt(e){if(typeof e=="number")return e;if(Bn(e))return st;if(Pe(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=Pe(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=Jn(e);var s=Kn.test(e);return s||Xn.test(e)?Qn(e.slice(2),s?2:8):zn.test(e)?st:+e}var es=function(){return _t.Date.now()};const Re=es;var ts="Expected a function",ns=Math.max,ss=Math.min;function Y(e,t,s){var n,l,a,o,i,d,g=0,u=!1,r=!1,c=!0;if(typeof e!="function")throw new TypeError(ts);t=lt(t)||0,Pe(s)&&(u=!!s.leading,r="maxWait"in s,a=r?ns(lt(s.maxWait)||0,t):a,c="trailing"in s?!!s.trailing:c);function m(y){var L=n,v=l;return n=l=void 0,g=y,o=e.apply(v,L),o}function h(y){return g=y,i=setTimeout(_,t),u?m(y):o}function O(y){var L=y-d,v=y-g,f=t-L;return r?ss(f,a-v):f}function S(y){var L=y-d,v=y-g;return d===void 0||L>=t||L<0||r&&v>=a}function _(){var y=Re();if(S(y))return M(y);i=setTimeout(_,O(y))}function M(y){return i=void 0,c&&n?m(y):(n=l=void 0,o)}function I(){i!==void 0&&clearTimeout(i),g=0,n=d=l=i=void 0}function b(){return i===void 0?o:M(Re())}function p(){var y=Re(),L=S(y);if(n=arguments,l=this,d=y,L){if(i===void 0)return h(d);if(r)return clearTimeout(i),i=setTimeout(_,t),m(d)}return i===void 0&&(i=setTimeout(_,t)),o}return p.cancel=I,p.flush=b,p}var A=(e=>(e.COMMAND_PANEL_STARRED_PROJECTS="command_panel_starred_projects",e.COMMAND_PANEL_MOVE_PLACES="command_panel_move_places",e.TODO_RENDER_PROJECT_LOGOS="todo_render_project_logos",e.TODO_RENDER_LABELS="todo_render_labels",e.ISSUE_HIGHLIGHT_MINE="issue_highlight_mine",e.ISSUE_SHOW_MY_UNRESOLVED_THREADS="issue_show_my_unresolved_threads",e.ISSUE_USE_THREADS_BY_DEFAULT="issue_use_threads_by_default",e.ISSUE_RENDER_PROJECT_LOGO="issue_render_project_logo",e.ISSUE_VALIDATE_MISSING_EPIC="issue_validate_missing_epic",e.ISSUE_VALIDATE_MISSING_MILESTONE="issue_validate_missing_milestone",e.ISSUE_VALIDATE_MISSING_ITERATION="issue_validate_missing_iteration",e.ISSUE_VALIDATE_MISSING_WEIGHT="issue_validate_missing_weight",e.ISSUE_VALIDATE_UNRESOLVED_THREADS="issue_validate_unresolved_threads",e.ISSUE_REQUIRED_SCOPED_LABELS="issue_required_scoped_labels",e.MR_HIGHLIGHT_MINE="mr_highlight_mine",e.MR_SHOW_MY_UNRESOLVED_THREADS="mr_show_my_unresolved_threads",e.MR_USE_THREADS_BY_DEFAULT="mr_use_threads_by_default",e.MR_DIM_DRAFT="mr_dim_draft",e.MR_HOTKEY_VIEWED="mr_hotkey_viewed",e.MR_HOTKEY_VIEWED_NEXT="mr_hotkey_viewed_next",e))(A||{});const J=en("resize",()=>{const e=On("chrome-gitlab-enhancer",C(new Map));function t(n,l=null){const a=e.value.get(n);return a===void 0?l:a}function s(n,l){e.value.set(n,l)}return{getSetting:t,setSetting:s}}),ls="M10.34 1.22a.75.75 0 0 0-1.06 0L7.53 2.97 7 3.5l.53.53 1.75 1.75a.75.75 0 1 0 1.06-1.06l-.47-.47h.63c.69 0 1.25.56 1.25 1.25v4.614a2.501 2.501 0 1 0 1.5 0V5.5a2.75 2.75 0 0 0-2.75-2.75h-.63l.47-.47a.75.75 0 0 0 0-1.06zM13.5 12.5a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm-9 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm1.5 0a2.5 2.5 0 1 1-3.25-2.386V5.886a2.501 2.501 0 1 1 1.5 0v4.228A2.501 2.501 0 0 1 6 12.5zm-1.5-9a1 1 0 1 1-2 0 1 1 0 0 1 2 0z",Ue="M2.22 10.78a.75.75 0 0 1 0-1.06l5.252-5.252a.75.75 0 0 1 1.06 0l5.252 5.252a.75.75 0 1 1-1.06 1.06L8.001 6.06 3.28 10.78a.75.75 0 0 1-1.06 0Z",je="M2.22 5.22a.75.75 0 0 0 0 1.06l5.252 5.252a.75.75 0 0 0 1.06 0l5.252-5.252a.75.75 0 1 0-1.06-1.06L8.001 9.94 3.28 5.22a.75.75 0 0 0-1.06 0Z",as="M3 2.5h6a.5.5 0 0 1 .5.5v10a.5.5 0 0 1-.5.5H3a.5.5 0 0 1-.5-.5V3a.5.5 0 0 1 .5-.5ZM1 3a2 2 0 0 1 2-2h6a2 2 0 0 1 1.97 1.658l2.913 1.516a1.75 1.75 0 0 1 .744 2.36l-3.878 7.45a.753.753 0 0 1-.098.145c-.36.526-.965.871-1.651.871H3a2 2 0 0 1-2-2V3Zm10 7.254 2.297-4.413a.25.25 0 0 0-.106-.337L11 4.364v5.89Z",os="M6.272 3.864a4.5 4.5 0 1 0-.1 8.314.75.75 0 1 0-.557-1.393 3 3 0 1 1 .066-5.543.75.75 0 1 0 .59-1.378ZM11.5 11a3 3 0 1 0 0-6 3 3 0 0 0 0 6Zm0 1.5a4.5 4.5 0 1 0 0-9 4.5 4.5 0 0 0 0 9ZM6 8a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0Z",Et="M3.391 4.844a3.375 3.375 0 1 1 1.485 6.406h-.002a3.865 3.865 0 0 1-.06 0H.75a.75.75 0 0 0 0 1.5h12.379l-.97.97a.75.75 0 1 0 1.061 1.06l2.25-2.25L16 12l-.53-.53-2.25-2.25a.75.75 0 1 0-1.06 1.06l.97.97H8.392A4.874 4.874 0 1 0 .018 8.298a.75.75 0 1 0 1.495-.13A3.375 3.375 0 0 1 3.39 4.844Z",St="m1.5 8.5 2.5-6h8l2.5 6h-13ZM0 8.569v2.181c0 .966.784 1.75 1.75 1.75H2v.75c0 .966.784 1.75 1.75 1.75h8.5a.75.75 0 0 0 0-1.5h-8.5a.25.25 0 0 1-.25-.25v-.75h10.25a.75.75 0 0 0 0-1.5h-12a.25.25 0 0 1-.25-.25V10h13a1.5 1.5 0 0 0 1.385-2.077l-2.629-6.308A1 1 0 0 0 12.333 1H3.667a1 1 0 0 0-.923.615L.115 7.923A1.498 1.498 0 0 0 0 8.569Z",$e="M6.427.512A1.75 1.75 0 0 1 7.664 0H13v3h3v5.335c0 .465-.185.91-.513 1.239L9.573 15.48a1.75 1.75 0 0 1-2.473 0l-2.293-2.293-1.293-1.293-3-3a1.75 1.75 0 0 1 0-2.475L6.428.512ZM11.5 1.5V3h-.836a1.75 1.75 0 0 0-1.237.512L3.514 9.419c-.06.06-.115.123-.165.19L1.574 7.833a.25.25 0 0 1 0-.353l5.913-5.907a.25.25 0 0 1 .177-.073H11.5ZM5.866 12.126l-1.292-1.293a.25.25 0 0 1 0-.353l5.913-5.907a.25.25 0 0 1 .177-.073H14.5v3.835a.25.25 0 0 1-.073.177L8.513 14.42a.25.25 0 0 1-.353 0l-2.294-2.293ZM12 8a1 1 0 1 0 0-2 1 1 0 0 0 0 2Z",wt="M9.25 3.75a1.25 1.25 0 1 1-2.5 0 1.25 1.25 0 0 1 2.5 0ZM10.45 5a2.75 2.75 0 1 0-4.9 0H3.82a1 1 0 0 0-.98.804l-1.6 8A1 1 0 0 0 2.22 15h11.56a1 1 0 0 0 .98-1.196l-1.6-8A1 1 0 0 0 12.18 5h-1.73ZM8 6.5H4.23l-1.4 7h10.34l-1.4-7H8Z",It="M2 0a2 2 0 0 0-2 2v10.06l1.28-1.28 1.53-1.53H4V11a2 2 0 0 0 2 2h7l1.5 1.5L16 16V6a2 2 0 0 0-2-2h-2V2a2 2 0 0 0-2-2H2Zm8.5 4V2a.5.5 0 0 0-.5-.5H2a.5.5 0 0 0-.5.5v6.44l.47-.47.22-.22H4V6a2 2 0 0 1 2-2h4.5Zm3.56 7.94.44.439V6a.5.5 0 0 0-.5-.5H6a.5.5 0 0 0-.5.5v5a.5.5 0 0 0 .5.5h7.621l.44.44Z",rs=E("div",{class:"gl-pl-4 gl-py-2 gl-font-sm gl-font-weight-bold gl-display-flex gl-align-items-center"},[E("span",null,"Starred Projects")],-1),is={key:0,class:"gl-mb-0 gl-pl-0 gl-list-style-none"},us=["href"],cs={class:"gl-new-dropdown-item-text-wrapper"},ds={class:"gl-display-flex gl-align-items-center gl-gap-3"},fs=["src"],gs={key:1,class:"gl-avatar gl-avatar-s24 gl-align-self-start gl-flex-shrink-0 gl-avatar-identicon gl-avatar-identicon-bg6"},ms={class:"gl-flex-grow-1 gl-flex-shrink-1 gl-truncate-end"},hs=["href"],ps=["href"],vs=["href"],bs=["href"],_s=ne({__name:"StarredProjects",props:{gitlabUserId:{default:0},match:{default:""}},setup(e){const t=e,{gitlabUserId:s,match:n}=de(t),{getSetting:l}=J(),a=C([]),o=C({}),i=D(()=>!!l(A.COMMAND_PANEL_STARRED_PROJECTS,!0));async function d(){if(!i.value)return;const{data:g}=await Q(`/api/v4/users/${s.value}/starred_projects`).json();a.value=g.value,n.value!==""&&(a.value=a.value.filter(u=>u.name_with_namespace.toLowerCase().includes(n.value.toLowerCase()))),a.value.forEach(u=>{Q(`/api/v4/projects/${u.id}/merge_requests?state=opened&wip=no&per_page=100`).json().then(({data:r})=>{o.value[u.id]=r.value.length})})}return G([n,i],async()=>d()),te(async()=>{d()}),(g,u)=>(w(),k(K,null,[rs,i.value?(w(),k("ul",is,[(w(!0),k(K,null,ce(a.value,r=>(w(),k("li",{key:r.id,class:"show-on-focus-or-hover--context gl-new-dropdown-item",tabindex:"0"},[E("a",{class:"gl-new-dropdown-item-content",href:r.web_url},[E("span",cs,[E("div",ds,[r.avatar_url?(w(),k("img",{key:0,class:"gl-avatar gl-avatar-s24",src:r.avatar_url},null,8,fs)):(w(),k("div",gs,$(r.name.charAt(0)),1)),E("div",ms,$(r.name_with_namespace),1),E("div",null,[E("a",{class:"gl-link gl-reset-color! gl-mr-4 has-tooltip",href:`${r.web_url}/-/issues`,title:"Issues"},[P(U,{class:"gl-mr-2","is-gitlab":!0,path:x(as)},null,8,["path"]),E("span",null,$(r.open_issues_count),1)],8,hs),E("a",{class:"gl-link gl-reset-color! gl-mr-4 has-tooltip",href:`${r.web_url}/-/merge_requests?draft=no`,title:"Merge requests"},[P(U,{class:"gl-mr-2","is-gitlab":!0,path:x(ls)},null,8,["path"]),E("span",null,$(o.value?.[r.id]||0),1)],8,ps),E("a",{class:"gl-button btn btn-icon btn-sm btn-default gl-ml-4 gl-mr-3 has-tooltip",href:`${r.web_url}/-/boards?iteration_id=Current`,title:"Issue board"},[P(U,{class:"gl-icon s16",path:x(Rt)},null,8,["path"])],8,vs),E("a",{class:"gl-button btn btn-icon btn-sm btn-default has-tooltip",href:`${r.web_url}/-/pipelines`,title:"Pipelines"},[P(U,{class:"gl-icon s16","is-gitlab":!0,path:x(os)},null,8,["path"])],8,bs)])])])],8,us)]))),128))])):N("",!0)],64))}}),ys=ne({__name:"CommandPanelEnhancer",props:{gitlabUserId:{default:0}},setup(e){const t=e,{gitlabUserId:s}=de(t),{getSetting:n}=J(),l=C(null);let a=null;const o=C(null);let i=null;const d=C(null),g=C(""),u=D(()=>!!n(A.COMMAND_PANEL_MOVE_PLACES,!0));function r(){if(!u.value||g.value!==""||!o.value)return;const p=o.value.querySelectorAll(".global-search-results > ul > li");if(p?.length>=3){const y=p[0],L=p[3];L?.parentNode?.insertBefore(y,L),y.classList.add("gl-border-t","gl-border-t-gray-200","gl-pt-2","gl-mt-2","gl-mt-3")}}function c(){const p=o.value?.querySelector(".global-search-results ul")||null;p&&(l.value=document.createElement("li"),l.value.className="gl-p-0 gl-m-0 gl-pt-2",l.value?.setAttribute("bordered","true"),p.prepend(l.value))}function m(){r(),c()}function h(p){const y=p.target;g.value=y.value,b()}function O(){d.value?.removeEventListener("input",M),d.value=null,o.value=null,i?.(),i=null}function S(){const p=document.getElementById("super-sidebar-search-modal");if(o.value=document.getElementById("super-sidebar-search-modal___BV_modal_content_")||null,!p||!o.value){O();return}d.value=o.value?.querySelector("input#search"),d.value?.addEventListener("input",M),i?.();const{stop:y}=An(p,()=>{setTimeout(()=>{document.body.contains(o.value)||O()},300)},{childList:!0,subtree:!0});i=y,m()}function _(p){if(p.key==="/"){const y=p.target;["INPUT","TEXTAREA"].includes(y.tagName)||S()}}const M=Y(h,300),I=Y(_,200),b=Y(m,200);return te(()=>{window.addEventListener("keydown",I),a=document.getElementById("super-sidebar-search"),a&&a.addEventListener("click",S)}),Ge(()=>{window.removeEventListener("keydown",I),a&&a.removeEventListener("click",r)}),(p,y)=>(w(),k("div",null,[l.value?(w(),F(Se,{key:0,to:l.value},[P(_s,{"gitlab-user-id":x(s),match:g.value},null,8,["gitlab-user-id","match"])],8,["to"])):N("",!0)]))}}),Es={key:0},Ss={class:"gl-font-weight-bold"},ws={class:"gl-font-weight-bold"},Is=ne({__name:"MyUnresolvedThreads",props:{gitlabUserId:{default:0},currentProjectPath:{default:""},isMergeRequest:{type:Boolean,default:!0}},setup(e){const t=e,{gitlabUserId:s,currentProjectPath:n,isMergeRequest:l}=de(t),{getSetting:a}=J(),o=ee([]),i=C(new Map);function d(_){return Array.isArray(_)?_[0]:n.value}function g(_){return Array.isArray(_)?_[1]:_}function u(_){return("teleport-issuable-meta-"+d(_)+"-"+g(_)).replace(/\//g,"_")}const r=D(()=>l.value&&!!a(A.MR_SHOW_MY_UNRESOLVED_THREADS,!0)||!l.value&&!!a(A.ISSUE_SHOW_MY_UNRESOLVED_THREADS,!0)),c=D(()=>o.value.map(_=>u(_))),m=D(()=>{const _=new Map;return o.value.forEach(M=>{const I=g(M),b=(i.value.get(I)||[]).filter(p=>{const y=p?.notes?.[0]||null;return!!y?.resolvable&&!y?.resolved});_.set(u(M),b.length)}),_}),h=D(()=>{const _=new Map;return o.value.forEach(M=>{const I=g(M),b=(i.value.get(I)||[]).filter(p=>{const y=p?.notes?.[0]||null;return!!y?.resolvable&&!y?.resolved&&y?.author?.id===s.value});_.set(u(M),b.length)}),_});function O(){o.value.forEach(_=>{const M=d(_),I=g(_);Q(`/api/v4/projects/${encodeURIComponent(M)}/${l.value?"merge_requests":"issues"}/${I}/discussions?per_page=100&is_custom=1`).json().then(({data:b})=>{b?.value&&i.value.set(I,b?.value||[])})})}function S(){const _=[];document.querySelectorAll(".issuable-list > li .issuable-reference").forEach(M=>{const I=M.textContent?.trim()?.split(l.value?"!":"#")||[];let b=I[0];I.length===2&&(b=I[0]===""?I[1]:I),_.push(b);const y=M.closest(l.value?".issuable-info-container":"li.issue")?.querySelector(".issuable-meta > ul"),L=document.createElement("div");L.className="gl-display-flex align-items-center",L.id=u(b),y?.append(L)}),o.value=_,O()}return G(r,_=>{_&&S()},{immediate:!0}),(_,M)=>(w(),k("div",null,[r.value?(w(),k("div",Es,[(w(!0),k(K,null,ce(c.value,I=>(w(),F(Se,{key:I,to:`#${I}`},[E("li",{class:X(["has-tooltip gl-display-none gl-sm-display-block gl-mr-3 md gl-text-orange-500!",{"badge badge-pill gl-badge badge-warning":m.value.get(I)}]),style:he({opacity:m.value.get(I)?1:.5}),title:"Unresolved threads"},[P(U,{class:"gl-icon s16 gl-mr-2",path:x(ft),style:{fill:"currentColor"}},null,8,["path"]),E("span",Ss,$(m.value.get(I)||0),1)],6),E("li",{class:X(["has-tooltip gl-display-none gl-sm-display-block md gl-text-red-500!",{"badge badge-pill gl-badge badge-danger":h.value.get(I)}]),style:he({opacity:h.value.get(I)?1:.5}),title:"My unresolved threads"},[P(U,{class:"gl-icon s16 gl-mr-2",path:x(Te),style:{fill:"currentColor"}},null,8,["path"]),E("span",ws,$(h.value.get(I)||0),1)],6)],8,["to"]))),128))])):N("",!0)]))}});function Tt(){const{getSetting:e}=J(),t=D(()=>!!e(A.ISSUE_USE_THREADS_BY_DEFAULT,!0));if(window.location.href.includes("issues")&&!t.value)return;const s=D(()=>!!e(A.MR_USE_THREADS_BY_DEFAULT,!0));window.location.href.includes("merge_requests")&&!s.value||te(()=>{document.querySelector('form.common-note-form .note-form-actions .js-comment-submit-button ul.gl-new-dropdown-contents li[data-testid="listbox-item-discussion"]')?.click()})}const Ts={style:{display:"flex"}},As={key:0,class:"gl-display-flex gl-align-items-center gl-pl-4 gl-rounded-base gl-min-h-7 gl-bg-red-100 gl-mr-3"},Ms={class:"gl-ml-3 btn-group"},Os=ne({__name:"MergeRequestDetail",props:{gitlabUserId:{default:0},iid:{default:0},currentProjectPath:{default:""}},setup(e){const t=e,{gitlabUserId:s,iid:n,currentProjectPath:l}=de(t);Tt();const{getSetting:a}=J(),o=C(null),i=ee([]),d=D(()=>!!a(A.MR_SHOW_MY_UNRESOLVED_THREADS,!0));async function g(){if(!n.value||!d.value)return;const{data:b}=await Q(`/api/v4/projects/${encodeURIComponent(l.value)}/merge_requests/${n.value}/discussions?per_page=100&is_custom=1`).json();i.value=b?.value||[],h()}const u=Y(async()=>{await g()},300);function r(b){if(b.target instanceof HTMLInputElement||b.target instanceof HTMLTextAreaElement||document.querySelectorAll(".diff-files-holder .vue-recycle-scroller").length)return;const y=document.querySelector('.diff-files-holder .file-actions input[type="checkbox"] + label');if(y){const L=y.getAttribute("for")||"";y?.click(),document.getElementById(L)?.blur()}}function c(b){b.target instanceof HTMLInputElement||b.target instanceof HTMLTextAreaElement||(r(b),setTimeout(()=>{document.querySelector(".diff-files-holder .next-page-item")?.click()},300))}function m(b){!b.shiftKey&&b.key=="v"&&a(A.MR_HOTKEY_VIEWED,!0)&&r(b),b.shiftKey&&b.key==="J"&&a(A.MR_HOTKEY_VIEWED_NEXT,!0)&&c(b)}function h(){o.value?.remove(),o.value=document.createElement("div");const b=document.querySelector(".merge-request-sticky-header:not(.gl-visibility-hidden) .merge-request-tabs + div");if(b){b.prepend(o.value);return}document.querySelector(".merge-request-details .merge-request-tabs-container > div")?.prepend(o.value)}const O=Y(h,400);te(async()=>{window.addEventListener("keydown",m),window.addEventListener("scroll",O),window.addEventListener("message",b=>{b.data.type==="chrome-request-completed"&&!b.data.data.url.includes("is_custom=1")&&u?.()}),Ee(()=>{h()}),u?.()}),Ge(()=>{window.removeEventListener("keydown",m),window.removeEventListener("scroll",O)});const S=D(()=>i.value.filter(b=>{const p=b?.notes?.[0]||null;return!!p?.resolvable&&!p?.resolved&&p?.author?.id===s.value})),_=C(-1),M=D(()=>S.value.map(b=>`note_${b?.notes?.[0]?.id}`));function I(b){_.value===-1?_.value=b>0?0:S.value.length-1:_.value=(_.value+b+S.value.length)%S.value.length;const p=M.value[_.value];p&&document.getElementById(p)?.scrollIntoView({behavior:"smooth"})}return(b,p)=>(w(),k("div",Ts,[d.value&&o.value?(w(),F(Se,{key:0,to:o.value},[M.value.length?(w(),k("div",As,[E("span",null,$(S.value.length)+" my unresolved threads",1),E("div",Ms,[E("button",{class:"btn discussion-previous-btn gl-rounded-base! gl-px-2! btn-default btn-md gl-button btn-default-tertiary btn-icon",title:"Go to my previous unresolved thread",onClick:p[0]||(p[0]=W(y=>I(-1),["prevent"]))},[P(U,{class:"gl-button-icon","is-gitlab":!0,path:x(Ue)},null,8,["path"])]),E("button",{class:"btn discussion-previous-btn gl-rounded-base! gl-px-2! btn-default btn-md gl-button btn-default-tertiary btn-icon",title:"Go to my next unresolved thread",onClick:p[1]||(p[1]=W(y=>I(1),["prevent"]))},[P(U,{class:"gl-button-icon","is-gitlab":!0,path:x(je)},null,8,["path"])])])])):N("",!0)],8,["to"])):N("",!0)]))}}),Ls={class:"toggle-icon"},ks={class:"gl-icon s16",viewBox:"0 0 24 24"},Cs=["d"],Ds=ne({__name:"GToggle",props:{modelValue:{type:Boolean,default:!1}},emits:["update:model-value"],setup(e,{emit:t}){const s=e,{modelValue:n}=de(s),l=t;return(a,o)=>(w(),k("button",{class:X([{"is-checked":x(n)},"gl-flex-shrink-0 gl-toggle"]),onClick:o[0]||(o[0]=W(i=>l("update:model-value",!x(n)),["prevent"]))},[E("span",Ls,[(w(),k("svg",ks,[E("path",{d:x(xt)},null,8,Cs)]))])],2))}}),At=e=>(Ht("data-v-11726163"),e=e(),Gt(),e),Rs={class:"dropdown b-dropdown gl-dropdown btn-group gl-display-block!"},xs=At(()=>E("span",{class:"gl-dropdown-button-text"},"GitLab Enhancer",-1)),Ns=At(()=>E("span",{class:"badge gl-ml-2 badge-tier badge-pill gl-badge sm has-tooltip",title:"View changelog for updates, located in the extension pop-up."}," 2.4.0 ",-1)),Vs={class:"gl-dropdown-inner"},Ps={class:"gl-dropdown-contents"},Us={class:"gl-ml-3"},js=["onClick"],$s=["title"],Hs={class:"gl-dropdown-item-text-wrapper"},Gs={class:"gl-dropdown-item-text-primary"},Fs=["value","onInput"],qs=ne({__name:"Preferences",setup(e){const{getSetting:t,setSetting:s}=J(),n=C(null),l=C(!1);pn(n,()=>{l.value=!1});const a={"Command Panel":[{label:"Show starred projects",title:"",key:A.COMMAND_PANEL_STARRED_PROJECTS,icon:Nt,isGitlabIcon:!1,iconClassName:"",defaultValue:!0},{label:'Move "Places" after "Frequently visited"',title:"",key:A.COMMAND_PANEL_MOVE_PLACES,icon:Vt,isGitlabIcon:!1,iconClassName:"",defaultValue:!0}],"To-Do List":[{label:"Render project logos",title:"",key:A.TODO_RENDER_PROJECT_LOGOS,icon:Be,isGitlabIcon:!1,iconClassName:"",defaultValue:!0},{label:"Render labels",title:"For issues & MRs",key:A.TODO_RENDER_LABELS,icon:$e,isGitlabIcon:!0,iconClassName:"",defaultValue:!0}],Issues:[{label:"Highlight my issues",title:"Highlighted with purple dashed border",key:A.ISSUE_HIGHLIGHT_MINE,icon:We,isGitlabIcon:!1,iconClassName:"",defaultValue:!0},{label:"Show # of my unresolved threads",title:"",key:A.ISSUE_SHOW_MY_UNRESOLVED_THREADS,icon:Te,isGitlabIcon:!1,iconClassName:"",defaultValue:!0},{label:'Use "Threads" in favor of "Comments" by default',title:"",key:A.ISSUE_USE_THREADS_BY_DEFAULT,icon:Ze,isGitlabIcon:!1,iconClassName:"",defaultValue:!0},{label:"Render project logos",title:"In issue overview & board",key:A.ISSUE_RENDER_PROJECT_LOGO,icon:Be,isGitlabIcon:!1,iconClassName:"",defaultValue:!0},{label:'Validate missing "Epic"',title:"",key:A.ISSUE_VALIDATE_MISSING_EPIC,icon:St,isGitlabIcon:!0,iconClassName:"",defaultValue:!0},{label:'Validate missing "Milestone"',title:"",key:A.ISSUE_VALIDATE_MISSING_MILESTONE,icon:Pt,isGitlabIcon:!1,iconClassName:"",defaultValue:!0},{label:'Validate missing "Iteration"',title:"",key:A.ISSUE_VALIDATE_MISSING_ITERATION,icon:Et,isGitlabIcon:!0,iconClassName:"",defaultValue:!0},{label:'Validate missing "Weight"',title:"",key:A.ISSUE_VALIDATE_MISSING_WEIGHT,icon:wt,isGitlabIcon:!0,iconClassName:"",defaultValue:!0},{label:"Validate unresolved threads",title:"",key:A.ISSUE_VALIDATE_UNRESOLVED_THREADS,icon:It,isGitlabIcon:!0,iconClassName:"",defaultValue:!0},{label:"Required labels",title:"Use comma separated values",key:A.ISSUE_REQUIRED_SCOPED_LABELS,icon:$e,isGitlabIcon:!0,iconClassName:"",defaultValue:""}],"Merge Requests":[{label:"Highlight my MRs",title:"Highlighted with purple dashed border",key:A.MR_HIGHLIGHT_MINE,icon:We,isGitlabIcon:!1,iconClassName:"",defaultValue:!0},{label:"Show # of my unresolved threads",title:"",key:A.MR_SHOW_MY_UNRESOLVED_THREADS,icon:Te,isGitlabIcon:!1,iconClassName:"",defaultValue:!0},{label:'Use "Threads" in favor of "Comments" by default',title:"",key:A.MR_USE_THREADS_BY_DEFAULT,icon:Ze,isGitlabIcon:!1,iconClassName:"",defaultValue:!0},{label:'Dim "Draft"',title:"",key:A.MR_DIM_DRAFT,icon:Ut,isGitlabIcon:!1,iconClassName:"",defaultValue:!0},{label:"Hotkey mark as viewed",title:"v",key:A.MR_HOTKEY_VIEWED,icon:Ye,isGitlabIcon:!1,iconClassName:"",defaultValue:!0},{label:"Hotkey mark as viewed & open next file",title:"Shift+J",key:A.MR_HOTKEY_VIEWED_NEXT,icon:Ye,isGitlabIcon:!1,iconClassName:"",defaultValue:!0}]};function o(d,g){const u=g.target;s(d,u?.value||"")}function i(d){typeof d.defaultValue=="boolean"&&s(d.key,!t(d.key,d.defaultValue))}return(d,g)=>(w(),k("div",{id:"chrome-gitlab-enhancer__preferences",ref_key:"rootPreferencesElement",ref:n},[E("div",Rs,[E("button",{class:"btn dropdown-toggle btn-default btn-md gl-button gl-dropdown-toggle",style:{"box-shadow":"none","border-color":"#e24329","border-width":"1px",padding:"0.25rem 0.5rem"},onClick:g[0]||(g[0]=W(u=>l.value=!l.value,["prevent"]))},[P(jt,{style:{width:"24px",height:"24px"}}),xs,Ns,P(U,{class:"gl-ml-2",path:x($t)},null,8,["path"])]),E("ul",{class:X([{show:l.value},"dropdown-menu"]),style:{right:"0",left:"initial",width:"320px"}},[E("div",Vs,[E("div",Ps,[(w(),k(K,null,ce(a,(u,r)=>(w(),k(K,{key:r},[E("label",Us,$(r),1),(w(!0),k(K,null,ce(u,c=>(w(),k("li",{key:c.key,class:"gl-dropdown-item",onClick:m=>i(c)},[E("button",{class:X(["dropdown-item",{"has-tooltip":!!c.title}]),style:he({"flex-wrap":typeof c.defaultValue=="string"?"wrap":"nowrap"}),title:c.title,onClick:g[1]||(g[1]=W(()=>{},["prevent"]))},[c.icon?(w(),F(U,{key:0,class:X([c.iconClassName,"gl-mr-3"]),"is-gitlab":c.isGitlabIcon,path:c.icon,style:{flex:"0 0 auto"}},null,8,["class","is-gitlab","path"])):N("",!0),E("div",Hs,[E("p",Gs,$(c.label),1)]),typeof c.defaultValue=="boolean"?(w(),F(Ds,{key:1,"model-value":!!x(t)(c.key,c.defaultValue)},null,8,["model-value"])):N("",!0),typeof c.defaultValue=="string"?(w(),k("input",{key:2,class:"form-control gl-border-gray-200",style:{"margin-left":"24px","margin-bottom":"8px"},type:"text",value:x(t)(c.key,c.defaultValue),onInput:m=>o(c.key,m)},null,40,Fs)):N("",!0)],14,$s)],8,js))),128))],64))),64))])])],2)])],512))}});const Bs=gt(qs,[["__scopeId","data-v-11726163"]]),Ws={key:0,class:"gl-display-flex gl-align-items-center gl-pl-4 gl-rounded-base gl-min-h-7 gl-bg-red-100 gl-mr-3 has-tooltip",title:"My unresolved threads"},Zs={class:"gl-ml-3 btn-group"},Ys={key:1,class:"gl-display-flex gl-align-items-center gl-pl-4 gl-rounded-base gl-min-h-7 gl-bg-orange-100 gl-mr-3 has-tooltip",title:"Total unresolved threads"},Js={class:"gl-ml-3 btn-group"},zs={class:"gl-dropdown-button-text"},Ks={key:0,class:"badge gl-ml-2 badge-danger badge-pill gl-badge sm",style:{"background-color":"#ae1800",color:"#fdd4cd"}},Xs={class:"gl-dropdown-inner"},Qs={class:"gl-dropdown-contents"},el={class:"dropdown-item"},tl={class:"gl-dropdown-item-text-wrapper gl-display-flex gl-justify-content-center"},nl=ne({__name:"IssueDetail",props:{gitlabUserId:{default:0},iid:{default:0},currentProjectPath:{default:""}},setup(e){const t=e,{gitlabUserId:s,iid:n,currentProjectPath:l}=de(t);Tt();const{getSetting:a}=J(),o=C(!1),i=C(null),d=ee(null),g=ee([]),u=C(-1),r=D(()=>!!a(A.ISSUE_SHOW_MY_UNRESOLVED_THREADS,!0)),c=D(()=>g.value.filter(v=>{const f=v?.notes?.[0]||null;return!!f?.resolvable&&!f?.resolved})),m=D(()=>c.value.filter(v=>v?.notes?.[0]?.author?.id===s.value)),h=D(()=>{const v=[{key:A.ISSUE_VALIDATE_MISSING_EPIC,label:"Epic",icon:St,isGitlabIcon:!0,isValid:d.value?.epic!==null?1:0},{key:A.ISSUE_VALIDATE_MISSING_MILESTONE,label:"Milestone",icon:Bt,isGitlabIcon:!1,isValid:d.value?.milestone!==null?1:0},{key:A.ISSUE_VALIDATE_MISSING_ITERATION,label:"Iteration",icon:Et,isGitlabIcon:!0,isValid:d.value?.iteration!==null?1:0},{key:A.ISSUE_VALIDATE_MISSING_WEIGHT,label:"Weight",icon:wt,isGitlabIcon:!0,isValid:d.value?.weight!==null?1:0},{key:A.ISSUE_VALIDATE_UNRESOLVED_THREADS,label:"Unresolved threads",icon:It,isGitlabIcon:!0,isValid:c.value.length===0}],f=a(A.ISSUE_REQUIRED_SCOPED_LABELS,"");if(f!==""){const V=f.split(",").map(H=>({key:H,label:`Label "${H}"`,icon:$e,isGitlabIcon:!0,isValid:d.value?.labels.some(q=>q.startsWith(H.trim()))?1:0}));v.push(...V)}return v}),O=D(()=>h.value.filter(v=>!!a(v.key,!0))),S=D(()=>O.value.filter(v=>!v.isValid).length);function _(){i.value?.remove(),i.value=document.createElement("div"),i.value?.classList.add("gl-ml-auto","gl-display-flex");const v=document.querySelector(".issue-sticky-header .issue-sticky-header-text");if(v){v.append(i.value);return}document.querySelector(".issue-details .detail-page-header-actions")?.prepend(i.value)}const M=Y(_,400);async function I(){if(!n.value)return;const{data:v}=await Q(`/api/v4/projects/${encodeURIComponent(l.value)}/issues/${n.value}?is_custom=1`).json();d.value=v?.value||null,Ee(()=>_())}async function b(){if(!n.value)return;const{data:v}=await Q(`/api/v4/projects/${encodeURIComponent(l.value)}/issues/${n.value}/discussions?is_custom=1`).json();g.value=v?.value||[]}const p=Y(async()=>{await I()},300),y=Y(async()=>{await b()},300);function L(v){u.value===-1?u.value=v>0?0:c.value.length-1:u.value=(u.value+v+c.value.length)%c.value.length;const f=`note_${c.value?.[u.value]?.notes?.[0]?.id}`;document.getElementById(f)?.scrollIntoView({behavior:"smooth"})}return te(()=>{window.addEventListener("scroll",M),window.addEventListener("message",v=>{v.data.type==="chrome-request-completed"&&!v.data.data.url.includes("is_custom=1")&&!v.data.data.url.includes("realtime_changes")&&(p(),y())}),p(),y()}),Ge(()=>{window.removeEventListener("scroll",M)}),(v,f)=>(w(),k("div",null,[i.value?(w(),F(Se,{key:0,to:i.value},[r.value&&m.value.length?(w(),k("div",Ws,[P(U,{class:"gl-icon gl-mr-3",path:x(Te)},null,8,["path"]),E("span",null,$(m.value.length),1),E("div",Zs,[E("button",{class:"btn discussion-previous-btn gl-rounded-base! gl-px-2! btn-default btn-md gl-button btn-default-tertiary btn-icon",title:"Go to my previous unresolved thread",onClick:f[0]||(f[0]=W(T=>L(-1),["prevent"]))},[P(U,{class:"gl-button-icon","is-gitlab":!0,path:x(Ue)},null,8,["path"])]),E("button",{class:"btn discussion-previous-btn gl-rounded-base! gl-px-2! btn-default btn-md gl-button btn-default-tertiary btn-icon",title:"Go to my next unresolved thread",onClick:f[1]||(f[1]=W(T=>L(1),["prevent"]))},[P(U,{class:"gl-button-icon","is-gitlab":!0,path:x(je)},null,8,["path"])])])])):N("",!0),c.value.length?(w(),k("div",Ys,[P(U,{class:"gl-icon gl-mr-3",path:x(ft)},null,8,["path"]),E("span",null,$(c.value.length),1),E("div",Js,[E("button",{class:"btn discussion-previous-btn gl-rounded-base! gl-px-2! btn-default btn-md gl-button btn-default-tertiary btn-icon",title:"Go to previous unresolved thread",onClick:f[2]||(f[2]=W(T=>L(-1),["prevent"]))},[P(U,{class:"gl-button-icon","is-gitlab":!0,path:x(Ue)},null,8,["path"])]),E("button",{class:"btn discussion-previous-btn gl-rounded-base! gl-px-2! btn-default btn-md gl-button btn-default-tertiary btn-icon",title:"Go to next unresolved thread",onClick:f[3]||(f[3]=W(T=>L(1),["prevent"]))},[P(U,{class:"gl-button-icon","is-gitlab":!0,path:x(je)},null,8,["path"])])])])):N("",!0),O.value.length>0?(w(),k("div",{key:2,class:"dropdown b-dropdown gl-dropdown btn-group gl-display-block!",onMouseenter:f[4]||(f[4]=W(T=>o.value=!0,["prevent"])),onMouseleave:f[5]||(f[5]=W(T=>o.value=!1,["prevent"]))},[E("button",{class:X([{"gl-bg-green-100!":!S.value,"gl-border-green-500!":!S.value,"gl-text-green-500!":!S.value,"gl-bg-red-100!":S.value,"gl-border-red-500!":S.value,"gl-text-red-500!":S.value,"gl-font-weight-bold!":S.value},"btn dropdown-toggle btn-default btn-md gl-button gl-dropdown-toggle gl-pl-3!"]),style:{"box-shadow":"none","border-width":"1px"}},[P(U,{class:"gl-mr-3",path:S.value?x(qt):x(Ft),style:he({fill:S.value?"#dd2b0e":"#108548"})},null,8,["path","style"]),E("span",zs,[Je($(S.value?"Incomplete":"Valid")+" ",1),S.value?(w(),k("span",Ks,$(S.value),1)):N("",!0)]),N("",!0)],2),E("ul",{class:X([{show:o.value},"dropdown-menu"]),style:{right:"0",left:"initial",width:"auto","min-width":"0"}},[E("div",Xs,[E("div",Qs,[(w(!0),k(K,null,ce(O.value,T=>(w(),k("li",{key:T.key,class:"gl-dropdown-item"},[E("button",el,[E("div",tl,[E("span",{class:X([{"badge-success":T.isValid,"badge-danger":!T.isValid},"badge badge-pill gl-badge lg"])},[P(U,{class:"gl-badge-icon gl-ml-1 gl-mr-3","is-gitlab":T.isGitlabIcon,path:T.icon},null,8,["is-gitlab","path"]),Je(" "+$(T.label),1)],2)])])]))),128))])])],2)],32)):N("",!0)],8,["to"])):N("",!0)]))}});const sl=gt(nl,[["__scopeId","data-v-179ab41c"]]);async function ll(e){const{data:t}=await Q(`/api/v4/projects/${encodeURIComponent(e)}?is_custom=1`).json();return t?.value||null}function al(){const{getSetting:e}=J(),t={},s=D(()=>!!e(A.TODO_RENDER_PROJECT_LOGOS,!0)),n=D(()=>!!e(A.ISSUE_RENDER_PROJECT_LOGO,!0));function l(o){const i=t[o];i&&(s.value&&window.location.href.includes("todos")&&document.querySelectorAll(`ul.todos-list a.todo-target-link[href*="${o}"]`).forEach(g=>{const u=g.closest("li")?.children?.[0]||null;if(u&&!u.children?.[0].classList.contains("chrome-gitlab-enhancer__project-avatar")){let r;i.includes("http")?(r=document.createElement("img"),r.setAttribute("src",i),r.setAttribute("style","width: 24px;")):(r=document.createElement("div"),r.className="gl-avatar gl-avatar-identicon gl-avatar-s24 gl-avatar-identicon-bg6",r.textContent=i),r.classList.add("gl-mr-4","chrome-gitlab-enhancer__project-avatar"),u.prepend(r),u.classList.add("gl-align-items-center")}}),n.value&&(window.location.href.includes("issues")&&document.querySelectorAll(`li.issue a.issue-title-text[href*="${o}"]`).forEach(g=>{const u=g?.parentElement?.parentElement?.parentElement||null;if(u&&!u.children?.[0].classList.contains("chrome-gitlab-enhancer__project-avatar")){let r;i.includes("http")?(r=document.createElement("img"),r.setAttribute("src",i),r.setAttribute("style","width: 24px;")):(r=document.createElement("div"),r.className="gl-avatar gl-avatar-identicon gl-avatar-s24 gl-avatar-identicon-bg6",r.textContent=i),r.classList.add("gl-mr-5","chrome-gitlab-enhancer__project-avatar"),u.prepend(r),u.classList.add("gl-align-items-center")}}),window.location.href.includes("boards")&&i.includes("http")&&document.querySelectorAll(`li.board-card span[title="${o}"]`).forEach(g=>{if(g.parentElement&&g.previousElementSibling){const u=document.createElement("img");u.setAttribute("src",i),u.setAttribute("style","width: 20px;"),u.classList.add("chrome-gitlab-enhancer__project-avatar"),g.parentElement.replaceChild(u,g.previousElementSibling),g.parentElement.classList.add("gl-display-flex","gl-align-items-center")}})))}function a(){const o=[];s.value&&window.location.href.includes("todos")&&document.querySelectorAll("ul.todos-list a.todo-target-link").forEach(d=>{const u=(d.getAttribute("href")||"").substring(1).split("/-/")[0]||"";!u||o.includes(u)||o.push(u)}),n.value&&(window.location.href.includes("issues")&&document.querySelectorAll("ul.issues-list li.issue .issuable-info .issuable-reference").forEach(d=>{const g=d?.textContent?.split("#")?.[0].trim()||"";!g||o.includes(g)||o.push(g)}),window.location.href.includes("boards")&&document.querySelectorAll("div.boards-app ul.board-list li.board-card").forEach(d=>{const u=(d.getAttribute("data-item-path")||"").split("#")[0]||"";!u||o.includes(u)||o.push(u)})),o.forEach(i=>{t[i]?l(i):ll(i).then(d=>{t[i]=d?.avatar_url||d?.name?.charAt(0)||null,l(i)})})}return{render:Y(a,500)}}function ol(){const{getSetting:e}=J(),t=D(()=>!!e(A.ISSUE_HIGHLIGHT_MINE,!0)),s=D(()=>!!e(A.MR_HIGHLIGHT_MINE,!0));function n(l){l&&(t.value&&(window.location.href.includes("boards")&&document.querySelectorAll(`.board-card a[href="/${l}"]`).forEach(o=>{o.closest("li.board-card")?.classList.add("gl-border","gl-border-2","gl-border-dashed","gl-border-purple-700")}),window.location.href.includes("issues")&&!window.location.href.includes("dashboard")&&document.querySelectorAll(`.issuable-meta a.gl-avatar-link[href$="/${l}"]`).forEach(o=>{o.closest(".issuable-info-container")?.closest("li")?.classList.add("gl-border!","gl-border-2!","gl-rounded-base!","gl-border-dashed!","gl-border-purple-700!","gl-m-3!")})),s.value&&window.location.href.includes("merge_requests")&&!window.location.href.includes("dashboard")&&document.querySelectorAll(`.issuable-meta li:not(.issuable-reviewers) a.author-link[href$="/${l}"]`).forEach(o=>{o.closest(".issuable-info-container")?.closest("li")?.classList.add("gl-border!","gl-border-2!","gl-rounded-base!","gl-border-dashed!","gl-border-purple-700!","gl-m-3!")}))}return{highlight:Y(n,500)}}function rl(){const{getSetting:e}=J();function t(){!e(A.MR_DIM_DRAFT,!0)||!window.location.href.includes("merge_requests")||document.querySelectorAll("li.merge-request").forEach(s=>{s.textContent?.includes("Draft:")&&s.classList.add("merge-request-draft")})}return{dim:Y(t,300)}}const il={key:0,class:"gl-label-text-scoped"},ul=ne({__name:"TodoList",setup(e){const{getSetting:t}=J(),s=C(new Map),n=ee([]),l=C(new Map),a=C({}),o=D(()=>n.value.reduce((u,r)=>{const c=r.split("/-/")?.[0]||"";return c&&!u.includes(c)&&u.push(c),u},[]));function i(){const u=[];document.querySelectorAll(".todo-item a.todo-target-link").forEach(r=>{const c=r.getAttribute("href")?.substring(1)||"";c&&u.push(c);const m=r.closest("li.todo")?.querySelector("div.todo-item");if(!m||m.children[m.children.length-1]?.className==="todo-item__labels")return;const h=document.createElement("div");h.className="todo-item__labels",m.append(h),a.value[c]=h}),n.value=u}function d(){n.value.forEach(u=>{const r=u.split("/-/")?.[0]||"";if(!r)return;const c=/\/(merge_requests|issues)\/(\d+)/,m=u.match(c);!m?.[1]&&!m?.[2]||Q(`/api/v4/projects/${encodeURIComponent(r)}/${m[1]}/${m[2]}?is_custom=1`).json().then(({data:h})=>{h.value?.labels?.length>0&&l.value.set(u,h.value.labels)})})}function g(){o.value.forEach(u=>{Q(`/api/v4/projects/${encodeURIComponent(u)}/labels?per_page=100&is_custom=1`).json().then(({data:r})=>{Array.isArray(r.value)&&r.value.forEach(c=>{s.value.has(c.name)||s.value.set(c.name,c)})})})}return G(o,g),G(n,d),te(()=>{t(A.TODO_RENDER_LABELS,!0)&&i()}),(u,r)=>(w(),k("div",null,[(w(!0),k(K,null,ce(a.value,(c,m)=>(w(),k(K,{key:m},[c?(w(),F(Se,{key:0,to:c},[(w(!0),k(K,null,ce(l.value.get(m),h=>(w(),k("span",{key:h,class:X([{"gl-label-scoped":h.includes("::")},"gl-label gl-mr-2 gl-label-sm gl-label-text-light"]),style:he({"--label-background-color":s.value.get(h)?.color,"--label-inset-border":`inset 0 0 0 1px ${s.value.get(h)?.color}`})},[E("span",{class:"gl-label-text",style:he({color:s.value.get(h)?.text_color})},$(h.split("::")[0]),5),h.includes("::")?(w(),k("span",il,$(h.split("::")[1]),1)):N("",!0)],6))),128))],8,["to"])):N("",!0)],64))),128))]))}}),cl={key:0},dl=ne({__name:"App",setup(e){const{render:t}=al(),{highlight:s}=ol(),{dim:n}=rl(),l=C(0),a=C(""),o=C(!1),i=D(()=>!!l.value),d=_n(),g=D(()=>d.value?.pathname?.split("/-/")?.[0].slice(1)||""),u=D(()=>{if(!d.value?.pathname)return 0;const O=/\/(\d+)\/?.*$/.exec(d.value.pathname);return O?.length===2?parseInt(O[1],10):0}),r=D(()=>d.value.pathname?.includes("merge_requests")),c=D(()=>d.value.pathname?.includes("issues")),m=D(()=>d.value.pathname?.includes("dashboard/todos"));return te(()=>{window.addEventListener("message",h=>{h.data.type==="chrome-request-completed"&&!h.data.data.url.includes("is_custom=1")&&(t(),s(a.value),n(),o.value=!!document.querySelector("ul.issuable-list > li:first-child .issuable-reference"))}),Q("/api/v4/user").json().then(({data:h})=>{l.value=h?.value?.id||0,a.value=h?.value?.username||""})}),(h,O)=>i.value?(w(),k("div",cl,[P(Bs),l.value?(w(),F(ys,{key:0,"gitlab-user-id":l.value},null,8,["gitlab-user-id"])):N("",!0),c.value&&u.value?(w(),F(sl,{key:1,"current-project-path":g.value,"gitlab-user-id":l.value,iid:u.value},null,8,["current-project-path","gitlab-user-id","iid"])):N("",!0),o.value&&!u.value?(w(),F(Is,{key:2,"current-project-path":g.value,"gitlab-user-id":l.value,"is-merge-request":r.value},null,8,["current-project-path","gitlab-user-id","is-merge-request"])):N("",!0),r.value&&u.value?(w(),F(Os,{key:3,"current-project-path":g.value,"gitlab-user-id":l.value,iid:u.value},null,8,["current-project-path","gitlab-user-id","iid"])):N("",!0),m.value?(w(),F(ul,{key:4})):N("",!0)])):N("",!0)}}),Mt=Wt(dl);Mt.use(Yt());Mt.mount("#chrome-gitlab-enhancer");
